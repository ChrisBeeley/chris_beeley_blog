<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head><script src="/chris_beeley_blog/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=chris_beeley_blog/livereload" data-no-instant defer></script>
    
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">


<title>Uncategorized - Chris Beeley&#39;s blog</title>
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "Chris Beeley\u0027s blog",
    
    "url": "http:\/\/localhost:1313\/chris_beeley_blog\/"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "http:\/\/localhost:1313\/chris_beeley_blog\/"
  
  
  
  
}
</script>

<meta property="og:url" content="http://localhost:1313/chris_beeley_blog/categories/Uncategorized/">
<meta property="og:type" content="website">
<meta property="og:site_name" content="Chris Beeley&#39;s blog">
   
<link rel="apple-touch-icon" sizes="180x180" href=" http://localhost:1313/chris_beeley_blog/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/chris_beeley_blog/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/chris_beeley_blog/favicon/favicon-16x16.png">


<meta name="generator" content="Hugo 0.124.1"><link rel="alternate" href="http://localhost:1313/chris_beeley_blog/index.xml" type="application/rss+xml" title="Chris Beeley&#39;s blog">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
<link rel="stylesheet" href="http://localhost:1313/chris_beeley_blog/css/main.css">
<link disabled id="dark-mode-theme" rel="stylesheet" href="http://localhost:1313/chris_beeley_blog/css/dark.css"><link rel="stylesheet" href="http://localhost:1313/chris_beeley_blog/css/syntax.css"><link rel="stylesheet" href="http://localhost:1313/chris_beeley_blog/css/codeblock.css">




  </head>
  <body>
    
<div class="container fixed-top">
  <div class="row justify-content-center">
    <div class="col-sm-12 col-md-12 col-lg-10 col-xl-10">

      <nav class="navbar navbar-expand-lg navbar-light fixed-top p-0">
        <div class="container">
          
          <a class="navbar-brand fw-bold" href="http://localhost:1313/chris_beeley_blog/">Chris Beeley&#39;s blog</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
            <ul class="navbar-nav mb-2 mb-lg-0">
              

              
              <li class="nav-item nav-link">
                <a id="dark-mode-toggle" class="bi bi-sun"></a>
              </li>
              
            </ul>
          </div>
        </div>
      </nav>

    </div>
  </div>
</div>
    









<header class="header-section ">

  <div class="intro-header no-img mt-10">
    <div class="container">
      <div class="row justify-content-center">
        

          
          <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12">
            

            <div class="categories-heading">
              

              

              

              
              

              

              
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-md-12">
       
      <div class="row">
        
          <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6  mb-4">
    <div class="card h-100 single-post-card shadow-effect bg-faded-light">
        <a href="http://localhost:1313/chris_beeley_blog/?p=1411/">
            <div class="card-body">

                <h3 class="fw-bold post-title">Shiny modules for beginners</h3>
                

                <p class="post-meta">
                    <span class="post-meta">
  
  
  &nbsp;August 5, 2020 

  

  
  
  
</span>


                </p>
                
                <div class="post-entry">

                    
                    <p>I‚Äôve seen some discussion on the Internet about whether people learning Shiny should start with modules or if they‚Äôre an advanced topic. I‚Äôm not going to link to any examples because this post is definitely not me saying- hey look at this rubbish over here, here‚Äôs why it‚Äôs wrong. I‚Äôve seen a couple of posts talking about it. But I just thought I would chip in my perspective.</p>
<p>I really love modules and they solve a lot of problems, and I think they could be a great thing for a beginner to learn. No reason at all why beginners can‚Äôt learn them. The only caution I would give those learners is that some things can be weird or fiddly with modules. So if you‚Äôre learning at your own pace, and want to do everything really neatly and use industry standards, great, go for it. But if you want to throw up a Shiny application to impress your boss (for example) and learn by doing then you may find yourself going down some very long, dark rabbit holes trying to get the particular thing you want working. (and yes, I am writing this post now because I have been down a few myself recently üòÄ)</p>
<p>As I say, purely my perspective generated from sitting at my keyboard and interacting regularly with maybe five people learning Shiny. Your mileage may vary</p>

                    
                </div>

                <div class="read-more-section">
                    <h6>Read more</h6>
                </div>
            </div>

            
            
        </a>
    </div>
</div> 
        
          <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6  mb-4">
    <div class="card h-100 single-post-card shadow-effect bg-faded-light">
        <a href="http://localhost:1313/chris_beeley_blog/?p=1395/">
            <div class="card-body">

                <h3 class="fw-bold post-title">Getting started in data science for healthcare</h3>
                

                <p class="post-meta">
                    <span class="post-meta">
  
  
  &nbsp;July 13, 2020 

  

  
  
  
</span>


                </p>
                
                <div class="post-entry">

                    
                    <p>I just recruited to a data science post at Nottinghamshire Healthcare NHS Trust and I‚Äôve been asked for feedback by several people about how to get started in data science in healthcare, and indeed how to get a job in data science in healthcare. I will also be recruiting another data scientist for our team in a few months. This post is designed to give you a feel for what we were looking for in the job that I just recruited to, as well as to the job that is coming up. They‚Äôre slightly different skill sets as I will discuss.</p>
<p>I should say at the top that I am pretty much a person on the Internet, there are people much better qualified than I am to answer this question, and there are much better jobs out there than the ones I have advertised and will advertise. My trust is a great place to work, and we have a lot of freedom to innovate, and we are big believers in using and publishing open source code. I hope we‚Äôre a friendly and supportive team too. But I‚Äôm sure there are many out there that do all this and more, and better. With all that said, let‚Äôs discuss what I was looking for last time, what I‚Äôm looking for next time, and what you can do to get the skills for these or any other similar jobs.</p>
<p>The recent post I advertised was for a band 7 data scientist, one year contract, starting salary of ¬£38K. It‚Äôs for a funded piece of work designing algorithms that can read patient feedback and tell you: what it‚Äôs about (parking, food, communication‚Ä¶), how positive or negative it is (you saved my life, this service is a disgrace, the ward was dirty, the food was cold‚Ä¶) and making a dashboard so people can interrogate their data. I don‚Äôt want to say too much about it here, otherwise this post will get way too long.</p>
<p>The first thing to say is that the field was VERY strong. I didn‚Äôt think we could get quite as much interest from quite as many talented people as we did. We were definitely spoiled for choice but the areas that ended up being very important were.</p>
<ol>
<li>Machine learning. Because it‚Äôs a one year project, with a specific goal, we were looking for someone who could just run with a machine learning project and could build a pipeline with real data</li>
<li>Team working. The ability to help more junior staff, and to work with non technical staff is absolutely vital in such a small team. We were looking for people skills as well as ‚Äútechnical‚Äù team working skills- version control, package management, documentation. Avoiding ‚Äúit works on my machine‚Äù, basically</li>
<li>Communication. Some people are completely on board with data science and trust experts to just get on with it and can engage them about what they want and ask the right questions. And some people will sit with their arms folded (literally or figuratively) and wait to be convinced. And a strong organisation needs both. Cheerleaders and critics. And we were looking for someone who could navigate a meeting with a healthy dose of each, as well as someone who could engage the straight up disengaged</li>
</ol>
<p>If you want to get good at this stuff, there are lots of things you can do. <a href="https://www.oreilly.com/library/view/hands-on-machine-learning/9781492032632/">This book</a> is excellent if you want to go the Python route. Kaggle is a great resource for datasets and how-to‚Äôs. Try to get some real data in your workplace and do some ML with it. Be a mentee. Be a mentor. Work with your team to get better practice around version control and code style. Sell it to your bosses. Even if they‚Äôre idiots and don‚Äôt listen, it‚Äôs all experience. Come to the interview and say that. ‚ÄúI identified several areas of data and analytic practice that could be improved by x, y, and z. I wrote them a five point plan explaining the training their staff would need, the likely benefits and pitfalls. They are idiots and didn‚Äôt listen.‚Äù</p>
<p>If you already work in the public sector I highly recommend the <a href="https://datasciencecampus.ons.gov.uk/capability/data-science-accelerator/">data science accelerator</a>. Twelve days, one a week, with a data science mentor. I was a mentee a year and a half ago. Then I was a mentor. Doing one or both is a really good way of getting out of your silo, seeing new datasets and challenges, and learning to ask and answer the right questions. Besides my PhD it‚Äôs the best thing I ever did, career wise.</p>
<p>The next job is going to be a bit more general purpose. The team has quite a few pieces of smaller paid work coming in and I need somebody who can help out as well as work in the Trust building on the work we‚Äôre already doing: statistics, machine learning, and publishing either as a document or a Shiny powered dashboard. We‚Äôre looking for similar stuff as last time, but not as focused on machine learning, perhaps someone with some stats knowledge- regression, experimental design, measures of association, all that stuff. I feel like R would be a big advantage, but if somebody can do all that in Python then that‚Äôs good too, and ditto other things like Julia. They would probably end up learning some R just to read the stuff we‚Äôre all writing, and we‚Äôd all end up learning Python/ Julia just to read their stuff. All to the good.</p>
<p>Again, we need someone who can work in a team (no <a href="https://hackernoon.com/thoughts-on-software-development-heroes-5ec656c2e31a">hero coders</a>) and communicate at all levels of the Trust and beyond. We need someone who can teach, and learn, and someone who can convince the sceptical and engage the disengaged. Something I would absolutely love to be able to recruit to is Linux server maintenance experience. I‚Äôm in charge of two Linux servers that do our work for us, one in the cloud, one behind the firewall (see this blog, passim) and I would love to be able to give the keys to somebody who knows what they‚Äôre doing. Even more, I‚Äôd love for them to do the next upgrade. Going to RStudio Connect with Ubuntu 20.04 was hideous (not the fault of RStudio or Ubuntu, obviously, purely my fault üòÄ) and having someone be able to worry about that would have been wonderful.</p>
<p>Some people have told me I‚Äôm wasting my time managing my own servers as a data scientist and I really need to get proper IT support, and maybe they‚Äôre right, but I‚Äôve come this far, even if I am doing it wrong. I‚Äôve been learning Linux server stuff on my own server for 7 years. If you want to learn this way without buying your own cloud server then just buy a Raspberry Pi and ssh into it from behind your firewall at home. Set up a LAMP stack, set up WordPress, set up the free versions of RStudio Server and Shiny Server, run plumber APIs, run PHP, write a Django application, whatever. You‚Äôll get in the most hideous mess and tear your hair out for entire weekends and you‚Äôll look back at those weekends fondly and be glad of all the learning you did that day üòÄ. And if you get in a complete mess just wipe the SD card and start again.</p>
<p>As I say, this is all caveat emptor. Your mileage may vary. But if you want my opinions then these are they. Keep an eye on my Twitter if you‚Äôre interested in the job, and feel free to @ or DM me, or indeed send an email, my address is in my Twitter profile.</p>

                    
                </div>

                <div class="read-more-section">
                    <h6>Read more</h6>
                </div>
            </div>

            
            
        </a>
    </div>
</div> 
        
          <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6  mb-4">
    <div class="card h-100 single-post-card shadow-effect bg-faded-light">
        <a href="http://localhost:1313/chris_beeley_blog/?p=1388/">
            <div class="card-body">

                <h3 class="fw-bold post-title">RStudio Connect behind the firewall</h3>
                

                <p class="post-meta">
                    <span class="post-meta">
  
  
  &nbsp;June 10, 2020 

  

  
  
  
</span>


                </p>
                
                <div class="post-entry">

                    
                    <p>This is part II of what would otherwise have been a far-too-long post about configuring RStudio Connect. A bit of back story, particularly for those of you who might have hit this from a Google search (which does happen, JetPack tells me) and don‚Äôt know who the heck I am and what I do all day. Here‚Äôs what I said in part I:</p>
<blockquote>
<p>I‚Äôve been using RStudio stuff on the server for a long time. I started using Shiny community edition back in 2013 for an application that is totally open and so doesn‚Äôt need authenticating. Then two years ago I started deploying Shiny applications that people authenticated to behind our Trust firewall using Shiny Pro. I have wanted to use RStudio Connect for a long time but it was hard to get the funding together for it given how things are with austerity since the banking crisis.</p>
<p>[also, I say later on in the first post- I am NOT DevOps. I‚Äôm just a random data scientist trying to get on with his job. So if this is all hilariously wrong/ dangerous/ time consuming, don‚Äôt say you weren‚Äôt warned].</p>
</blockquote>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>The script is simple. Move from Shiny Pro to Connect. The first bit was easy. The LDAP/ AD configuration file looks a little different, but the nice man from IT and I got it working on the second try. HTTPS, LDAPS, also just pretty much cut and paste. So far so good. I haven‚Äôt configured the email bit yet, partly because we don‚Äôt really need it and partly because I‚Äôm not really sure if my Trust will see a Linux server under my control firing off emails on a schedule might pose an IG problem. They would all be routed through the mail servers of my Trust, so it‚Äôs no different to me just sitting and sending out emails, but you know what they say, to err is human but if you really want to mess things up use a computer. You don‚Äôt need to set up email as long as your authentication is all sorted and the authentication works beautifully.</p>
<p>When you publish something you can very easily add users and groups to the people who can view it, and it even does autocomplete. So for example all the relevant groups for the main suite of applications start with ‚ÄúRS_T‚Äù. So if you type ‚ÄúRS_T‚Äù into the ‚Äúwho can view‚Äù box it automatically shows you all the groups that you can add. And you can add people from the staff directory who have never logged in, so you can just add them to everything, send them a link, and they‚Äôre off, all using their network password. Beautiful. And as I said in my previous post, that isn‚Äôt just ME doing that, it‚Äôs any publisher. So the other data scientists can just publish stuff, and add people and groups, and use their exact version of R and their exact version of packages. Compare that with me Filezilla‚Äôing application folders onto a Linux server, testing them, finding they don‚Äôt work, and then emailing the person who wrote them saying ‚Äúit doesn‚Äôt work, any idea why?‚Äù and them saying ‚Äúoh I‚Äôm using such and such version of tidyr‚Äù and me saying ‚Äúoh I‚Äôm not running that on the server, hang on‚Äù and back and forwards and‚Ä¶ you get the idea.</p>
<p>So that‚Äôs what you gain. You can hand off all that responsibility to other people and just do your own thing. But that does come at a price (I‚Äôm not saying the price isn‚Äôt worth paying. I‚Äôm not saying it IS worth paying. I‚Äôm just helping you get your head around the migration). There are two things that I got really used to doing with a Shiny Pro installation that you cannot do on a Connect installation that can give you a headache. It‚Äôs just my perspective, obviously, if I‚Äôd never used Shiny Pro I wouldn‚Äôt have this perspective, but I think it can help you understand how it works.</p>
<p>The first most obvious thing that you will miss (and also not miss and think ‚Äúgood riddance‚Äù) is the file system. As far as I can tell you have NO access to the file system. You can‚Äôt pop .Rdata objects in /srv/shiny-server/applications/data_store and then load them from several Shiny applications. You can deploy them straight from your hard drive via the RStudio IDE to the server, for example if you‚Äôre writing a quarterly RMarkdown report and you have the data sitting on your computer. Or you can use the pins package (<a href="https://github.com/rstudio/pins">https://github.com/rstudio/pins</a>). The pins package allows anybody with publishing rights to create a data object on Connect that they and other publishers can point to with their own documents/ applications. Again, it‚Äôs a nice way of allowing people to deploy stuff (data in this case) without touching the terminal or using Filezilla or whatever. The related thing that you do not have is cron. Well, you do have cron but without a file system you can‚Äôt do anything with it (üôÉ). So for my use case, where I have a cronjob that processes data and places it somewhere in the file system the conversion for me is to have a scheduled RMarkdown report that does that processing and then uses the pin package to place it on the server where everyone with the right access level can see it. This is nicer, really, because it democratises the sharing of data, otherwise it all has to be placed manually onto a Linux file system. In my case I‚Äôm using Kerberos, which means that the top of the script has to get a Kerberos ticket:</p>
<pre tabindex="0"><code>&lt;pre class=&#34;wp-block-preformatted&#34;&gt;system(&#34;kinit USERNAME -k -y KEYTAB.FILE&#34;)
</code></pre><p>Which is totally fine, it just feels really weird and it really didn‚Äôt occur to me to do it until I asked somebody at RStudio. But note that the KEYTAB.FILE can‚Äôt access the file system either- so you have to deploy it with your application otherwise it won‚Äôt be found. You can‚Äôt just pop it somewhere safe on the server and forget about it. As I say there‚Äôs nothing wrong with this it just feels like putting my jacket sleeves on in the opposite order to how I normally do- fine but weird.</p>
<p>The second thing that you will miss (and, again, think ‚Äúgood riddance‚Äù) is the ability to launch R in the terminal on the server, load your packages, run some code, see that it works, shut down the terminal, publish the same code via Connect and have it work every time. The specific set of packages that you have installed on your server, whether you‚Äôre running it as the root user or as yourself, bear no relation at all to the packages that will run on the Connect server. Which sounds totally fine but I got myself in a position where the server could run the code quite happily via the terminal, and so could my computer, but it failed when I published it to Connect. This was because the package version that was running on my computer, even though it worked on my computer, wouldn‚Äôt install on the server, and although I could install a different, older version of the package, that didn‚Äôt help, because Connect doesn‚Äôt care what‚Äôs on the server, it wants the version that‚Äôs on your computer. There is actually a way round this which RStudio encourage you to avoid where possible, and that is to define some packages as using the server version of the package. You can read about this here <a href="https://docs.rstudio.com/connect/admin/r/package-management/">https://docs.rstudio.com/connect/admin/r/package-management/</a>. It looks like this in the config:</p>
<pre tabindex="0"><code>&lt;pre class=&#34;wp-block-preformatted&#34;&gt;; /etc/rstudio-connect/rstudio-connect.gcfg
[Packages]
External = ROracle
External = RJava
</code></pre><p>Just be warned that even though they caution against it I had to use it to resolve some conflicts which I think were caused by different versions being available and current on Windows (where the IDE is) and Linux (on which Connect runs).</p>
<p>Phew! That was a long post. I think that‚Äôs all I know about that. Feel free to find me on Twitter or email or (in happier times) at a conference and have a chat about it if you‚Äôre interested.</p>

                    
                </div>

                <div class="read-more-section">
                    <h6>Read more</h6>
                </div>
            </div>

            
            
        </a>
    </div>
</div> 
        
          <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6  mb-4">
    <div class="card h-100 single-post-card shadow-effect bg-faded-light">
        <a href="http://localhost:1313/chris_beeley_blog/?p=1380/">
            <div class="card-body">

                <h3 class="fw-bold post-title">RStudio Connect in the cloud</h3>
                

                <p class="post-meta">
                    <span class="post-meta">
  
  
  &nbsp;June 10, 2020 

  

  
  
  
</span>


                </p>
                
                <div class="post-entry">

                    
                    <p>I‚Äôve been using RStudio stuff on the server for a long time. I started using Shiny community edition back in 2013 for an application that is totally open and so doesn‚Äôt need authenticating. Then two years ago I started deploying Shiny applications that people authenticated to behind our Trust firewall using Shiny Pro. I have wanted to use RStudio Connect for a long time but it was hard to get the funding together for it given how things are with austerity since the banking crisis.</p>
<p>NHS organisations can now get a discount for RStudio Connect and I have finally obtained a multi server licence. It runs in the cloud, and I have set up a password based login for this server to allow us to serve applications to people in our region without their being behind our firewall and without opening up the data for everyone to see (it‚Äôs not row level patient data, it‚Äôs only summaries, but everyone is more comfortable with it being behind a password). I also have it running on my firewalled server doing the work that Shiny Pro used to do.</p>
<p>I didn‚Äôt think deeply about it before I started (more fool me, really), and so I was surprised how different Connect is to Shiny Pro. I‚Äôm writing this to give some of my experiences to smooth out the learning curve for others.</p>
<p>I‚Äôm going to slightly artificially split this blog post into Stuff I Did In The Cloud and Stuff I Did Behind The Firewall, even though a lot of it could be written under either, just to stop this from being The Longest Blog Post Ever Written About R. If you‚Äôre interested in what I‚Äôm saying (make up your own mind about that üôÇ) then you should read both.</p>
<p>So far all I‚Äôve done on the cloud server is take a Shiny application that works on my machine, deploy it to Connect, and then share it with authenticated users. I will be doing more stuff with MySQL integration and cron, and some other stuff, but I‚Äôm going to talk more about databases when I talk about the firewalled one (which is doing it on hard mode, basically).</p>
<p>I wanted to authenticate people without the help of preexisting corporate resources (like Active Directory or LDAP). There are two main ways of doing this. Use a cloud based authentication system (like OAuth with Google) or just get Connect to handle it all. I didn‚Äôt really want to force people to use their Google accounts (if they even have them) so I got Connect to deal with all the passwords. This works fine. I think it‚Äôs a bit odd that you have to use a terminal based tool to delete users and can‚Äôt just do it on the GUI but no big deal. However, it‚Äôs worth noting that in order to get this to work you will need an email server on the host machine. As will be clear to anybody reading I am not DevOps. I‚Äôm just a data scientist who wants to spin up the server and then forget about it and crack on with putting Shiny applications up. I managed to get Shiny server community edition working pretty easily some years back and with quite a lot of hard work and help also got Pro running behind our firewall (with Kerberos, LDAPS, all that).</p>
<p>With Connect and needing a mail server that‚Äôs another leap forward in terms of your Linux skills. It‚Äôs not so much getting postfix working, that‚Äôs actually fairly simple, it‚Äôs all the configuration necessary to convince other people‚Äôs mail servers that you‚Äôre not sending them spam. Fortunately I actually did that a few years back implementing a laughably shonky cron job that picked up important pieces of data and emailed them to managers overnight if there was anything they needed to see. I needed to add the server to a special allow list to get through NHS email filters, even. It‚Äôs lucky for me that this work was already done because with my pretty limited knowledge this would have been a stumbling block.</p>
<p>I don‚Äôt even know if this stuff about Linux skills is important. I‚Äôve been doing this work with servers for some years now, cheap and cheerful, no DevOps support, just to get things working. Some people on Twitter seem to think that it‚Äôs a fool‚Äôs errand and you absolutely need proper Linux support in your organisation to use RStudio products. It has not been easy for me to learn and do all this stuff, and if I‚Äôm honest this isn‚Äôt really what I was dreaming about doing when I was doing my psychology PhD. But the fact remains that Linux support is rare to non existent in the NHS and this whole journey has been either me doing it or nobody doing it. I feel that my organisation has made great strides with R, partly because of the work I have put in messing around with the servers, but mainly because of the enthusiasm and talent of the people writing the R. I‚Äôve never been able to look these people in the eye and say ‚ÄúI‚Äôm sorry, our organisation just doesn‚Äôt support that and neither do I‚Äù and so here we are. Draw your own conclusions. I claim no expertise in any of this. Our servers definitely do what they say on the tin. That‚Äôs as far as I‚Äôve got.</p>
<p>Once I‚Äôd got all the stuff with the email sorted it was plain sailing. It‚Äôs worth knowing that Connect can store multiple versions of R and multiple versions of packages so the people deploying to the server can deploy their exact configuration to the server. The big change for me is that other people can put their own stuff up and (if they‚Äôre an admin) they can also invite other people to Connect and give them access to applications. So it‚Äôs sort of fire and forget, which is wonderful, obviously.</p>
<p>It‚Äôs worth noting also that if you‚Äôre collaborating on an application everyone needs the rsconnect/ folder which contains details of where and how to deploy the application. You can put that in a shared area or just check it into GitHub and anyone with publisher rights can update one of your applications.</p>
<p>Just as RStudio have been telling me, Connect is really a platform for data scientists to publish their own work. It allows you to give all of your data scientists the tools they need to deploy reports and dashboards and to sign people up and authenticate them, all without touching the server. And that is very liberating for me.</p>
<p>There‚Äôs a mental handbrake turn when we get to working with databases and data, that is relevant in the cloud too, but I‚Äôm going to talk about it in the next blog post, because that‚Äôs where I encountered it first and where I had the maximum amount of head scratching with it.</p>

                    
                </div>

                <div class="read-more-section">
                    <h6>Read more</h6>
                </div>
            </div>

            
            
        </a>
    </div>
</div> 
        
          <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6  mb-4">
    <div class="card h-100 single-post-card shadow-effect bg-faded-light">
        <a href="http://localhost:1313/chris_beeley_blog/?p=1366/">
            <div class="card-body">

                <h3 class="fw-bold post-title">Productionising R at Nottinghamshire Healthcare</h3>
                

                <p class="post-meta">
                    <span class="post-meta">
  
  
  &nbsp;May 26, 2020 

  

  
  
  
</span>


                </p>
                
                <div class="post-entry">

                    
                    <p>I‚Äôm hopeful we‚Äôre moving into a bit of a new phase with using R in my Trust so I thought I‚Äôd outline the direction of travel, to see if it chimes with anyone else and just to keep people up to date about what we‚Äôre doing.</p>
<p>We‚Äôve used Shiny for some years now, maybe 7, and we have applications behind the firewall and in the cloud which are well used by the staff who need them. We‚Äôve also been building our skills (R and data ops, which is a whole other post) and I‚Äôm hopeful that we‚Äôre ready for the next phase, which I would call the ‚Äúproductionise‚Äù phase. There are two main tasks to achieve before we‚Äôve really got the work that we‚Äôre doing nicely embedded in everyday practice at Nottinghamshire Healthcare.</p>
<p>The first thing we‚Äôre looking at at the moment is using the data warehouse better. We have a very large and well featured data warehouse and it does loads of really great stuff but we (and I‚Äôm the worst offender for this) are still relying too much on pulling stuff out of it to say, Excel, and then reading that into R and off we go with an analysis. It‚Äôs a lot of work getting it out and then you can‚Äôt really communicate with the data warehouse people easily about what you did because you‚Äôve introduced this whole other layer on top messing around with Excel sheets and you can‚Äôt easily tell them what you did. So the first bit for me (and this is not revolutionary in any way, we‚Äôre just building up to something) is to use the {odbc} and {pool} package, with shiny, to directly interface with the data warehouse, do the analysis, deploy it as a Shiny application, and just have it living live on the data warehouse. It‚Äôs striking straight away that when you do that suddenly you‚Äôre talking the same language as your BI team and you can communicate to them what you‚Äôve done and give them to tools to reimplement it themselves if they want to.</p>
<p>And the second bit we need to get right is productionising the Shiny applications themselves. I‚Äôve been looking at the {golem} package to do this. Golem really appeals to me for two reasons. Firstly, because it provides a robust framework for modularising code. I‚Äôm starting to realise that I do write the same Shiny code over and over again. Something in particular that I have done a lot is write code that makes sense of a spreadsheet. Ultimately I would like to write a module that can take an incredibly messy spreadsheet and with a few clicks from the user tidies it up ready for further processing. And with the right level of modularity I could use that over and over again. I did start writing one a little while ago but I got distracted.</p>
<p>I‚Äôve got a few projects coming up that exemplify the process and an abstract submitted at the <a href="https://events.linuxfoundation.org/r-medicine/">R in medicine conference</a> so hopefully I‚Äôll be back to say more about this all in due course with some real examples. In the meantime there‚Äôs some bare bones golem code <a href="https://github.com/ChrisBeeley/shinySPC">here</a> and <a href="https://github.com/CDU-data-science-team/healthcareSPC">here</a> but it‚Äôs early days so please don‚Äôt judge me üôÇ</p>

                    
                </div>

                <div class="read-more-section">
                    <h6>Read more</h6>
                </div>
            </div>

            
            
        </a>
    </div>
</div> 
        
          <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6  mb-4">
    <div class="card h-100 single-post-card shadow-effect bg-faded-light">
        <a href="http://localhost:1313/chris_beeley_blog/?p=1344/">
            <div class="card-body">

                <h3 class="fw-bold post-title">app.R and global.R</h3>
                

                <p class="post-meta">
                    <span class="post-meta">
  
  
  &nbsp;April 3, 2020 

  

  
  
  
</span>


                </p>
                
                <div class="post-entry">

                    
                    <p>I‚Äôm doing some Shiny training this year and I want to teach whatever the new thinking is so I‚Äôve been reading Hadley Wickham‚Äôs online book <a href="https://mastering-shiny.org/">Mastering Shiny</a>. There‚Äôs a couple of things that I‚Äôve noticed where Shiny is moving on, so if you want to keep up to date I suggest you have a look. I‚Äôm going to pick out a few here. Firstly, note that in Shiny 1.5 (which is not released at the time of writing) all code in the R/ directory will be sourced automatically. This is a very good idea, I‚Äôve got loads of source(‚Äúuseful_code.R‚Äù, local = TRUE) lines in some of my applications, so it gets rid of all that.</p>
<p>Something else that‚Äôs different is modules are working slightly differently, which I haven‚Äôt bothered to absorb yet, I‚Äôve enough on my plate with {golem} but if you‚Äôre using modules I suggest to keep abreast and have a look at the <a href="https://mastering-shiny.org/scaling-modules.html">section on modules</a>.</p>
<p>The thing that has just pricked up <a href="https://twitter.com/ChrisBeeley/status/1245729113597530117">various ears on Twitter</a>, though, is the lack of an option on the RStudio option to create separate server.R and ui.R files when creating a new Shiny application through the wizard. I was very surprised when I noticed this. And indeed if you look at Hadley‚Äôs book there is no mention of server.R and ui.R, it‚Äôs all just app.R. He suggests that if you are building a large application you hive off the logic (in Shiny 1.5, in the R/ folder, or for now by calling source(‚Äúfile.R, local = TRUE).</p>
<p>But then straight away you‚Äôre wondering about where that leaves global.R. For the uninitiated, global.R is a separate file that‚Äôs really useful when you‚Äôre deploying to a server because it is run only once when the application is run the first time and then will serve its contents to any applications. Its contents is also available to ui.R, which can be helpful setting up the UI based on what‚Äôs in the data.</p>
<p>As I mentioned I want to teach where the world is going so I‚Äôm trying to do things the new way (I have never taught app.R because, honestly, I hate it, but I guess with the new source R/ folder I can see the reasoning, and I‚Äôm not going to argue with the folks down at RStudio anyway üôÇ )</p>
<p>I wasn‚Äôt sure about where app.R fitted in with global.R and running on a server so I have written a test application. <a href="https://gist.github.com/ChrisBeeley/cfddc35235f6119c326d7f70e8ad9120">You can see the code here</a>, I‚Äôm sorry it won‚Äôt run because you don‚Äôt have the data and being honest I can‚Äôt be bothered to deploy it properly somewhere where you can get it but you get the idea.</p>
<p>The first time the code runs the Sys.sleep(10) runs and you get a big pause. But, sure enough, when you go back it doesn‚Äôt run and you get straight in. You can see also that the contents of the datafile are available to the UI (choices = unique(ae_attendances$Name). Lastly, take my word for it that if you add a file in to the folder called ‚Äúrestart.txt‚Äù then it will rerun (and generate the 10 second pause) the next time you go to the application, <a href="https://docs.rstudio.com/shiny-server/#restarting-an-application">just as I used to do with global.R</a>.</p>
<p>That‚Äôs all I know at the moment. I hope this is clear and useful (and correct!), it‚Äôs all based on stuff I have cobbled together today looking at Hadley‚Äôs book and messing around.</p>

                    
                </div>

                <div class="read-more-section">
                    <h6>Read more</h6>
                </div>
            </div>

            
            
        </a>
    </div>
</div> 
        
      </div>
    </div>
  </div>
</div>

<div class="container">
 <div class="row font-sans"> 
   <div class="col-md-12 mt-10">
      <nav aria-label="Page navigation"> 
      <ul class= "pagination justify-content-end">    
      
    <ul class="pagination pagination-default">
      <li class="page-item">
        <a href="/chris_beeley_blog/categories/Uncategorized/" aria-label="First" class="page-link" role="button"><span aria-hidden="true">&laquo;&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/chris_beeley_blog/categories/Uncategorized/page/4/" aria-label="Previous" class="page-link" role="button"><span aria-hidden="true">&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/chris_beeley_blog/categories/Uncategorized/page/3/" aria-label="Page 3" class="page-link" role="button">3</a>
      </li>
      <li class="page-item">
        <a href="/chris_beeley_blog/categories/Uncategorized/page/4/" aria-label="Page 4" class="page-link" role="button">4</a>
      </li>
      <li class="page-item active">
        <a aria-current="page" aria-label="Page 5" class="page-link" role="button">5</a>
      </li>
      <li class="page-item">
        <a href="/chris_beeley_blog/categories/Uncategorized/page/6/" aria-label="Page 6" class="page-link" role="button">6</a>
      </li>
      <li class="page-item">
        <a href="/chris_beeley_blog/categories/Uncategorized/page/7/" aria-label="Page 7" class="page-link" role="button">7</a>
      </li>
      <li class="page-item">
        <a href="/chris_beeley_blog/categories/Uncategorized/page/6/" aria-label="Next" class="page-link" role="button"><span aria-hidden="true">&raquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/chris_beeley_blog/categories/Uncategorized/page/29/" aria-label="Last" class="page-link" role="button"><span aria-hidden="true">&raquo;&raquo;</span></a>
      </li>
    </ul> 
      </ul>
      </nav> 
    </div>
  </div>
</div>


    


<footer>

  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <ul
          class="list-inline list-group list-group-horizontal text-center footer-links d-flex justify-content-center flex-row">

          
          
        </ul>
      </div>
    </div>

    <div class="row">
      <div class="col-md-12">
        <p class="credits copyright text-muted">
          

          &nbsp;&bull;&nbsp;&copy;
          
          2023
          

          
          &nbsp;&bull;&nbsp;
          <a href="http://localhost:1313/chris_beeley_blog/">Chris Beeley&#39;s blog</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          Powered by <a href="https://gohugo.io">Hugo</a> & <a href="https://github.com/binokochumolvarghese/lightbi-hugo">Lightbi.</a>&nbsp; Made with ‚ù§ by <a href="https://binovarghese.com">Bino</a>
          
        </p>
      </div>
    </div>
  </div>
</footer><script src="https://code.jquery.com/jquery-3.7.0.slim.min.js" integrity="sha256-tG5mcZUtJsZvyKAxYLVXrmjKBVLd6VpVccqz/r4ypFE=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.min.js" integrity="sha384-Y4oOpwW3duJdCWv5ly8SCFYWqFDsfob/3GkgExXKV4idmbt98QcxXYs9UoXAB7BZ" crossorigin="anonymous"></script><script src="http://localhost:1313/chris_beeley_blog/js/dark-mode.js"></script>
    
  </body>
</html>

