<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head><script src="/chris_beeley_blog/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=chris_beeley_blog/livereload" data-no-instant defer></script>
    
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">


<title>Uncategorized - Chris Beeley&#39;s blog</title>
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "Chris Beeley\u0027s blog",
    
    "url": "http:\/\/localhost:1313\/chris_beeley_blog\/"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "http:\/\/localhost:1313\/chris_beeley_blog\/"
  
  
  
  
}
</script>

<meta property="og:url" content="http://localhost:1313/chris_beeley_blog/categories/Uncategorized/">
<meta property="og:type" content="website">
<meta property="og:site_name" content="Chris Beeley&#39;s blog">
   
<link rel="apple-touch-icon" sizes="180x180" href=" http://localhost:1313/chris_beeley_blog/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/chris_beeley_blog/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/chris_beeley_blog/favicon/favicon-16x16.png">


<meta name="generator" content="Hugo 0.124.1"><link rel="alternate" href="http://localhost:1313/chris_beeley_blog/index.xml" type="application/rss+xml" title="Chris Beeley&#39;s blog">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
<link rel="stylesheet" href="http://localhost:1313/chris_beeley_blog/css/main.css">
<link disabled id="dark-mode-theme" rel="stylesheet" href="http://localhost:1313/chris_beeley_blog/css/dark.css"><link rel="stylesheet" href="http://localhost:1313/chris_beeley_blog/css/syntax.css"><link rel="stylesheet" href="http://localhost:1313/chris_beeley_blog/css/codeblock.css">




  </head>
  <body>
    
<div class="container fixed-top">
  <div class="row justify-content-center">
    <div class="col-sm-12 col-md-12 col-lg-10 col-xl-10">

      <nav class="navbar navbar-expand-lg navbar-light fixed-top p-0">
        <div class="container">
          
          <a class="navbar-brand fw-bold" href="http://localhost:1313/chris_beeley_blog/">Chris Beeley&#39;s blog</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
            <ul class="navbar-nav mb-2 mb-lg-0">
              

              
              <li class="nav-item nav-link">
                <a id="dark-mode-toggle" class="bi bi-sun"></a>
              </li>
              
            </ul>
          </div>
        </div>
      </nav>

    </div>
  </div>
</div>
    









<header class="header-section ">

  <div class="intro-header no-img mt-10">
    <div class="container">
      <div class="row justify-content-center">
        

          
          <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12">
            

            <div class="categories-heading">
              

              

              

              
              

              

              
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-md-12">
       
      <div class="row">
        
          <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6  mb-4">
    <div class="card h-100 single-post-card shadow-effect bg-faded-light">
        <a href="http://localhost:1313/chris_beeley_blog/?p=371/">
            <div class="card-body">

                <h3 class="fw-bold post-title">Data in the NHS</h3>
                

                <p class="post-meta">
                    <span class="post-meta">
  
  
  &nbsp;March 20, 2013 

  

  
  
  
</span>


                </p>
                
                <div class="post-entry">

                    
                    <p>I wrote a little piece for an information pack related to the <a href="http://www.institute.nhs.uk/innovation/spread_and_adoption/nhs_patient_feedback_challenge.html">Patient Feedback Challenge</a> so I thought I may as well share it here. I’m a little rushed so I won’t hyperlink the references, apologies for this they are all at the bottom in plain text.</p>
<p>NHS data systems are, quite naturally, built around very strict data management systems which emphasise the security of data and ensuring accountability of data loss or misuse. This is right and proper. However, very frequently, clinicians, managers, auditors and evaluators do not need to access highly sensitive personal information. In certain cases, information can be shared freely over the internet, as with the data collected on patient experience within the Patient Feedback Challenge (survey responses, Patient Opinion stories, and specific extracts from the PALS database).</p>
<p>The skills and technologies to rapidly analyse and disseminate data of this kind where rights access is not an issue is presently lacking in many NHS settings. Data analytic solutions, where they exist, are often large and complex and are complex and expensive to set up and modify. Where solutions are brought in from private sector providers these tend to be inflexible and it can be difficult for an organisation to achieve the results they want using off the shelf technologies (for example, integrating and resharing different types of data, such as the survey, Patient Opinion, and PALS data involved within the Patient Feedback Challenge).</p>
<p>A further limitation in the data architecture of many NHS organisations is the tendency for data to exist in silos, with each department maintaining its own separate database with no capacity to combine or reshare any of the data. Often the existence and location of datasets is unknown to others working elsewhere in a Trust.</p>
<p>Another problem endemic in many NHS settings is Spreadsheet addiction (e.g. Burns, 2004). This has been given as a possible culprit in JP Morgan Chase’s having lost 2 billion dollars in May 2012 (from <a href="http://goo.gl/SSAMS)">http://goo.gl/SSAMS)</a>:</p>
<p>‘James Kwak, associate professor at the University of Connecticut School of Law… noted some interesting facts in JP Morgan Chase’s post-mortem investigation of the losses. Specifically, that the Value at Risk (VaR) model that underpinned the hedging strategy:</p>
<p>“operated through a series of Excel spreadsheets, which had to be completed manually, by a process of copying and pasting data from one spreadsheet to another”, and “that it should be automated” but never was.’</p>
<p>The process of analysing and presenting Service User and Carer Experience survey data began in a similar fashion, with spreadsheets and macros being used to produce summary graphics, and reports manually cut and pasted together. Fortunately for us, before we lost 2 billion dollars this way there was a mishap with the process and it became obvious that the process needed to go from “should be automated” to “has been automated” in order to meet the reporting timescales. An incremental approach to automation was adopted, and it’s worth noting that three years ago the lead analyst on the survey had no programming experience whatsoever. Each quarter the survey reporting would demand another layer of complexity and the analyst would learn out of books and by accessing helpful online communities how to perform whatever new task was demanded. As with most technological movements, automation did not bring a reduction in workload but rather more sophisticated and better results, and within a few years reporting on survey data had gone from a task that was difficult for one person to perform quarterly alongside other tasks to a level of complexity that would demand more than one individual working full time for the whole of each quarter just to meet each quarterly timescale.</p>
<p>The patient feedback challenge has allowed us (with our friends at <a href="http://numiko.com/">Numiko</a>) to clear the final hurdle and to remove the last vestiges of human effort from the regular reporting, which means that quarterly survey reports and custom extracts will be available 24 hours a day, 365 days a year to anyone in the world with an internet connection. Managers will be able to see the latest results from their area and anywhere else in the Trust at any point in the reporting cycle and service users and carers will be able to transparently query and scrutinise all of the patient feedback data that we collect.</p>
<p>Two principles have guided the work on data architecture and processing. Firstly, all the technologies that were used are simple, free, and open source. Using languages such as R and Python and reporting technologies such as HTML and LaTeX means that not only are there no costs associated with buying or licensing software but also that analysis and reporting technologies are simple to use straight away. In a process known as agile software development (Beck et al., 2001) all of the technologies that have been produced have been put to immediate use. Early on, automation was only possible of graphics and manual effort was required to put together the report and write textual summaries. Later graphics and text were both automated and only formatting and final edits were performed by a human being. With the completion of the Patient Feedback Challenge now the formatting can also be automated. But at each stage the results of the technology were being used live in order to meet the demands of the organisation. This has the twin benefit of giving an immediate payoff to investment in workforce costs developing the software as well as giving the opportunity for the technology to be refined in use. The results of each stage of development were obvious when each reporting cycle was complete and work has been undertaken throughout to better serve both the Involvement team who deliver the survey results as well as the clinicians, managers, service users, and carers who make use of them.</p>
<p>The second principle is that all of the work which has taken place within the survey analysis and reporting and the Patient Feedback Challenge has left a legacy not only of technologies that can be used by the organisation but also systems within the organisation and skills and experience within the workforce which allow this work to prosper and flourish. Everyone involved in the data side of the project has put in place new systems to better capture and share data and learned valuable skills which will live within the organisation allowing further development work as well as new projects to be undertaken. A key feature of the whole Patient Feedback Challenge has been the development of staff and volunteers and the work with data and reporting was no different in this respect.</p>
<p>References</p>
<p>Beck et al. (2001). Manifesto for Agile Software Development. Agile Alliance. Retrieved 20-8-2012</p>
<p>Burns, 2004. Spreadsheet addiction. <a href="http://www.burns-stat.com/pages/Tutor/spreadsheet">http://www.burns-stat.com/pages/Tutor/spreadsheet</a>_addiction.html Retrieved 16-5-2012</p>

                    
                </div>

                <div class="read-more-section">
                    <h6>Read more</h6>
                </div>
            </div>

            
            
        </a>
    </div>
</div> 
        
          <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6  mb-4">
    <div class="card h-100 single-post-card shadow-effect bg-faded-light">
        <a href="http://localhost:1313/chris_beeley_blog/?p=303/">
            <div class="card-body">

                <h3 class="fw-bold post-title">Unstable net promoter scores</h3>
                

                <p class="post-meta">
                    <span class="post-meta">
  
  
  &nbsp;February 8, 2013 

  

  
  
  
</span>


                </p>
                
                <div class="post-entry">

                    
                    <p>If you work in the NHS you’ll know that the “net promoter score” (aka the friends and family test- “would you recommend this service to family and friends?”) is coming to NHS services, indeed it’s hit the headlines with the coalition government promoting its use in the face of some pretty stiff opposition (e.g. <a href="http://www.independent.co.uk/life-style/health-and-families/health-news/health-experts-reject-friends-and-family-test-8440238.html">here</a>).</p>
<p>I have never been all that convinced by it, particularly the way the score is calculated by subtracting the percentage of detractors (those who would not recommend or unlikely to) from the percentage of promoters (those who would recommend). We’ve started using it in our survey and I have had a query because one area’s scores are jumping around a lot. I thought it was high time I looked at the actual scores. We don’t use a 10 point scale as many do, we use a 5 point scale, with the points being equal to “Extremely unlikely”, “Unlikely”, “Neither”, “Likely”, and “Very likely”. Net promoter is calculated by taking the proportion of “Very likely”s and subtracting the proportion of the bottom 3 categories summed.</p>
<p>I’ve looked at the methodology in two ways. Firstly, by comparing the net promoter method with just finding the average (allocating 1 to 5 points from “Extremely unlikely” to “Extremely likely”). It’s arguable how appropriate the average is given the negative skew to the responses, but it will have to do as a comparison. It should be noted that I’ve used two y-axes, one blue on the left for the net promoter methodology and pink on the right for the average methodology. One has to be very careful when using two y-axes, it’s easy to mislead the reader by moving the scales up and down, but really we’re just watching the lines go up and down together over time, so we should be safe here.</p>
<p>Here is the results, with each panel representing a different service (anonymised). <a href="http://chrisbeeley.net/wp-content/uploads/2013/02/average.png"><img src="http://chrisbeeley.net/wp-content/uploads/2013/02/average.png?w=470" alt="Image"></a></p>
<p>Actually, it looks pretty okay to me. You can see the service this query originated with, right at the top left, labelled “V”. The promoter scores jump about quite a bit more, but the inverse “V” shape is evident also in the average</p>
<p>Secondly, I’ve compared the question itself by comparing with our overall “How do you rate the service quality” question using the net promoter methodology. Here are the results of that.</p>
<p><a href="http://chrisbeeley.net/wp-content/uploads/2013/02/sq.png"><img src="http://chrisbeeley.net/wp-content/uploads/2013/02/sq.png?w=470" alt="Image"></a></p>
<p>Again, the results look okay, but you can see again poor service “V” whose family and friends test promoter scores (blue) are jumping around but, interestingly, even with the promoter methodology their Service quality scores are pretty static.</p>
<p>A lot of the objections to the friends and family test (e.g. <a href="http://www.nhssurveys.org/Filestore/reports/Overarching_questions_for_patient_surveys_v3.pdf">here</a>) are based on preliminary psychometric investigations rather than “live” data, so this is an interesting addition to the overall debate.</p>
<p>So, if anything, it’s the question that appears to be problematic, I must admit I did think it would be the other way around. I’ll follow up this analysis when we have more data.</p>

                    
                </div>

                <div class="read-more-section">
                    <h6>Read more</h6>
                </div>
            </div>

            
            
        </a>
    </div>
</div> 
        
          <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6  mb-4">
    <div class="card h-100 single-post-card shadow-effect bg-faded-light">
        <a href="http://localhost:1313/chris_beeley_blog/?p=302/">
            <div class="card-body">

                <h3 class="fw-bold post-title">Bottom-up creation of data-driven capabilities: show don’t tell</h3>
                

                <p class="post-meta">
                    <span class="post-meta">
  
  
  &nbsp;December 7, 2012 

  

  
  
  
</span>


                </p>
                
                <div class="post-entry">

                    
                    <p>Fantastic post on how interactive analysis can help sell data-driven answers within an organisation. Time will tell if I can achieve similar things.</p>
<p><a href="http://houseofstones.me/2012/12/05/bottom-up-creation-of-data-driven-capabilities-show-dont-tell/">Here!</a></p>

                    
                </div>

                <div class="read-more-section">
                    <h6>Read more</h6>
                </div>
            </div>

            
            
        </a>
    </div>
</div> 
        
          <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6  mb-4">
    <div class="card h-100 single-post-card shadow-effect bg-faded-light">
        <a href="http://localhost:1313/chris_beeley_blog/?p=293/">
            <div class="card-body">

                <h3 class="fw-bold post-title">Shiny app running at last</h3>
                

                <p class="post-meta">
                    <span class="post-meta">
  
  
  &nbsp;December 2, 2012 

  

  
  
  
</span>


                </p>
                
                <div class="post-entry">

                    
                    <p>I’m currently taking part in the NHS Institute for Innovation supported Patient Feedback challenge with colleagues at Nottinghamshire Healthcare NHS Trust. We’re delivering our patient feedback in a web system and I have been working with the web developers, the lovely people over at <a href="http://numiko.com/#/home">Numiko</a>, they’re doing all the web type stuff and I’m writing R code, running over <a href="http://www.rforge.net/FastRWeb/">FastRWeb</a>, which is fantastic and will get a well deserved blog post some time soon.<br>
In order to make sure that my code keeps pace with the interface they design and there’s no nasty surprises when the launch of the website gets near I’ve been doing some prototyping with the wonderful <a href="http://www.rstudio.com/shiny/">Shiny</a> package from the amazing people over at RStudio, whose IDE I sincerely love.</p>
<p>I’ve done a little video about it for the challenge which I thought I might as well share on here. I’m blown away by how easy it is to use and although I’m using it for prototyping in this case I can imagine building a whole tool with it and getting something really useful and attractive, maybe with a little bit of JavaScript jiggery-pokery.</p>
<p><a href="https://vimeo.com/54727705">Video</a></p>
<p>I won’t share all the server side code because it’s a bit of a mess at the moment, I’ll put a cleaner version up on GitHub once it’s a bit further along, but here’s the UI code just to demonstrate how simple it is (really the server side just picks up one or two of the variables and then does various graphs etc. based on code I already had).</p>
<pre tabindex="0"><code>&lt;pre class=&#34;brush: r; title: ; notranslate&#34; title=&#34;&#34;&gt;

library(shiny)
# Define UI
shinyUI(pageWithSidebar(

# Application title
headerPanel(&#34;SUCE results&#34;),

# first set up All/ Division results

sidebarPanel(
selectInput(&#34;Division&#34;, &#34;Select division&#34;, list(&#34;Trust&#34; = 9, &#34;Local&#34;= 0, &#34;Forensic&#34;=1, &#34;HP&#34; = 2)),
conditionalPanel(
condition = &#34;input.Division != 9&#34;,
uiOutput(&#34;divControls&#34;)
),
textInput(&#34;keyword&#34;, &#34;Keyword search: (e.g. food, staff)&#34;),
selectInput(&#34;start&#34;, &#34;From: &#34;, list(&#34;Apr - Jun 11&#34; = 9, &#34;Jul - Sep 11&#34; = 10, &#34;Oct - Dec 11&#34; = 11,
&#34;Jan - Mar 12&#34;= 12, &#34;Apr - Jun 12&#34; = 13, &#34;Jul - Sep 12&#34; = 14)),
selectInput(&#34;end&#34;, &#34;To: &#34;, list(&#34;Apr - Jun 11&#34; = 9, &#34;Jul - Sep 11&#34; = 10, &#34;Oct - Dec 11&#34; = 11,
&#34;Jan - Mar 12&#34;= 12, &#34;Apr - Jun 12&#34; = 13, &#34;Jul - Sep 12&#34; = 14),
selected = &#34;Jul - Sep 12&#34;),
checkboxInput(&#34;custom&#34;, &#34;Advanced controls&#34;, value=FALSE),
conditionalPanel(
condition = &#34;input.custom == true&#34;,
selectInput(&#34;responder&#34;, &#34;Responder type&#34;, list(&#34;All&#34; = 9, &#34;Service user&#34;= 0, &#34;Carer&#34;=1)),
selectInput(&#34;sex&#34;, &#34;Gender&#34;, list(&#34;All&#34; = &#34;All&#34;, &#34;Men&#34;= &#34;M&#34;, &#34;Women&#34;= &#34;F&#34;))
)

),

# Show the caption and plot of the requested variable
mainPanel(
h3(textOutput(&#34;Title&#34;)),
tabsetPanel(
tabPanel(&#34;Stacked plot&#34;, plotOutput(&#34;StackPlot&#34;)), 
tabPanel(&#34;Trend&#34;, plotOutput(&#34;TrendPlot&#34;)), 
tabPanel(&#34;Responses&#34;, tableOutput(&#34;TableResponses&#34;))
))
))
 
</code></pre>
                    
                </div>

                <div class="read-more-section">
                    <h6>Read more</h6>
                </div>
            </div>

            
            
        </a>
    </div>
</div> 
        
          <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6  mb-4">
    <div class="card h-100 single-post-card shadow-effect bg-faded-light">
        <a href="http://localhost:1313/chris_beeley_blog/?p=255/">
            <div class="card-body">

                <h3 class="fw-bold post-title">But I do want to be data (cross posted)</h3>
                

                <p class="post-meta">
                    <span class="post-meta">
  
  
  &nbsp;September 17, 2012 

  

  
  
  
</span>


                </p>
                
                <div class="post-entry">

                    
                    <p>I’ve got a guest piece on the <a href="https://www.patientopinion.org.uk/blog/post/2012/09/17/guest-blog-but-i-do-want-to-be-data.aspx">Patient Opinion Blog</a> which is cross-posted below.</p>
<p>Healthcare scientists will universally recognise the dominance of quantitative methodology over qualitative methodology, with the oft-qutoed hierarchy of evidence featuring such quantitative behemoths as meta-analysis and RCT at the top and qualitative methods further down, rather sniffily described as “Case reports” or “Case series”.</p>
<p>As a rather hardcore quantitative scientist myself with a great deal of good feeling towards my qualitative brethren, it was with joy and horror that I read Paul’s recent <a href="//www.patientopinion.org.uk/blog/post/2012/07/06/i-done28099t-want-to-be-data-i-want-a-conversation.aspx%E2%80%9D">piece</a> on the Patient Opinion blog “I don’t want to be data, I want a conversation”, which flips the usual dominance relationship on its head and champions qualitative over quantitative methods. Paul argues that the NHS needs to “step outside its mindset” and stop using words like “captured” and “mined” in regard to patient feedback which should be treated, first and foremost, as a conversation.</p>
<p>One of the funny things about being a data monkey in the NHS is that people think of you as rather like a machine, spewing out graphs and computer code and don’t think about you as getting sick, or tired, or seeing a doctor. But in fact I have rather a lot of chronic illnesses and it seems I’m forever waiting in the GP’s reception or waiting for my consultant to call me. I’ve seen many doctors over the years, some brilliant, some okay, and some really dreadful ones, and I totally identify with the idea that when you feedback to the NHS you want it to listen to you and respond properly rather than giving you a “corporate” response which really just protects them legally and doesn’t commit to any change.</p>
<p>I do think it’s dangerous, though, to conflate the use of surveys, statistics, and data-focused methodologies with poor quality responses from health providers.</p>
<p>Because actually I do want to be data.</p>
<p>I recognise the value of response rate, sample size, reliability, and validity and although I am a big fan of the story-driven approach adopted by Patient Opinion I worry that if we only had two stories from each service user area we wouldn’t know enough about the silent majority. A good example of this would be where specific service user groups had poor engagement with feedback mechanisms. Their voice would never be heard. Using a data-driven approach we can compare the demographic composition of survey respondents with the known demographic composition of service users and ensure we are hearing everybody’s voice. Where we are not hearing everyone’s voice, we can even use complex survey techniques to adjust summary statistics to better reflect the “true” value of the statistic in the population.</p>
<p>I’m an atypical example, of course. Most people don’t want to be data, and I frustrate people in my work and home life by continuously harping on about probability, the ecological fallacy, correlation (it’s NOT CAUSATION!), the presence or absence of control groups, covariates, and so on ad infinitum. But I’m proud to be a data monkey and it’s my heartfelt wish to make sure that we can hear all the voices across all of our health services, analyse, mine, factor, and standardise them, and only then will we be ready to have a truly informed conversation over a nice cup of tea (this stage I’ll leave to the experts, I’ll stay here with my spreadsheets, but it’s white with none, thanks).</p>

                    
                </div>

                <div class="read-more-section">
                    <h6>Read more</h6>
                </div>
            </div>

            
            
        </a>
    </div>
</div> 
        
          <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6  mb-4">
    <div class="card h-100 single-post-card shadow-effect bg-faded-light">
        <a href="http://localhost:1313/chris_beeley_blog/?p=239/">
            <div class="card-body">

                <h3 class="fw-bold post-title">Super easy heatmaps of postcodes</h3>
                

                <p class="post-meta">
                    <span class="post-meta">
  
  
  &nbsp;July 25, 2012 

  

  
  
  
</span>


                </p>
                
                <div class="post-entry">

                    
                    <p>Whatever I want to do, there are always intrepid explorers who’ve been there and blogged it, and so the satisfaction of my long held desire to get to know more about how Nottinghamshire Healthcare’s services are spread geographically has been wonderfully expedited by <a href="http://blog.revolutionanalytics.com/2012/07/making-beautiful-maps-in-r-with-ggmap.html">these</a> amazing <a href="http://stevendkay.wordpress.com/2010/04/21/plotting-postcode-density-heatmaps-in-r/">blog posts</a>.</p>
<p>Special thanks, of course, go to David Kahle and Hadley Wickham, progenitors of the mighty <a href="http://cran.r-project.org/web/packages/ggmap/index.html">ggmap</a> package and also to the fine folk at <a href="http://www.geonames.org/">geonames</a> who freely distribute postcodes from around the world in .csv format.</p>
<p>With the thanks out of the way, there’s almost no work for me to do at all, and I’ve produced this lovely heatmap with absolutely minimal coding. I can’t tell you what it represents, I’m afraid, because I haven’t cleared the data for release, and actually it doesn’t represent anything particularly interesting at the moment. I need to do some preparation of the data but I naturally did this bit first because it’s more fun.</p>
<p><a href="http://chrisbeeley.net/wp-content/uploads/2012/07/map2.png"><img src="http://chrisbeeley.net/wp-content/uploads/2012/07/map2.png?w=300" alt="" title="Map">Click to expand!</a></p>
<pre tabindex="0"><code>&lt;pre class=&#34;brush: r; title: ; notranslate&#34; title=&#34;&#34;&gt;
library(ggmap)

myUni=mydata[!duplicated(mydata$ClientID),] # produce dataframe with unique individuals

mywhere=merge(myUni, mycodes, by.x=&#34;ClientHomePostcode&#34;,
              by.y=&#34;Postcode&#34;, all=FALSE) # merge with postcode data

### Plot!

map.center = geocode(&#34;Nottingham, UK&#34;) # Centre map on Nottingham

myMap = qmap(c(lon=map.center$lon, lat=map.center$lat),
              source=&#34;google&#34;, zoom=10) # download map from Google

myMap + stat_bin2d(bins=80, aes(x=Long, y=Lat), alpha=.6, data=mywhere) +
  scale_fill_gradient(low = &#34;blue&#34;, high =&#34;red&#34;)
  # plot with a bit of transparency
</code></pre><p>Note finally that you can use Google’s map API to give you latitudes and longitudes from postcode data (using the geocode() function), but you are limited to 2500 queries per day. I had many more than that so I needed to download the postcode data.</p>

                    
                </div>

                <div class="read-more-section">
                    <h6>Read more</h6>
                </div>
            </div>

            
            
        </a>
    </div>
</div> 
        
      </div>
    </div>
  </div>
</div>

<div class="container">
 <div class="row font-sans"> 
   <div class="col-md-12 mt-10">
      <nav aria-label="Page navigation"> 
      <ul class= "pagination justify-content-end">    
      
    <ul class="pagination pagination-default">
      <li class="page-item">
        <a href="/chris_beeley_blog/categories/Uncategorized/" aria-label="First" class="page-link" role="button"><span aria-hidden="true">&laquo;&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/chris_beeley_blog/categories/Uncategorized/page/23/" aria-label="Previous" class="page-link" role="button"><span aria-hidden="true">&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/chris_beeley_blog/categories/Uncategorized/page/22/" aria-label="Page 22" class="page-link" role="button">22</a>
      </li>
      <li class="page-item">
        <a href="/chris_beeley_blog/categories/Uncategorized/page/23/" aria-label="Page 23" class="page-link" role="button">23</a>
      </li>
      <li class="page-item active">
        <a aria-current="page" aria-label="Page 24" class="page-link" role="button">24</a>
      </li>
      <li class="page-item">
        <a href="/chris_beeley_blog/categories/Uncategorized/page/25/" aria-label="Page 25" class="page-link" role="button">25</a>
      </li>
      <li class="page-item">
        <a href="/chris_beeley_blog/categories/Uncategorized/page/26/" aria-label="Page 26" class="page-link" role="button">26</a>
      </li>
      <li class="page-item">
        <a href="/chris_beeley_blog/categories/Uncategorized/page/25/" aria-label="Next" class="page-link" role="button"><span aria-hidden="true">&raquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/chris_beeley_blog/categories/Uncategorized/page/29/" aria-label="Last" class="page-link" role="button"><span aria-hidden="true">&raquo;&raquo;</span></a>
      </li>
    </ul> 
      </ul>
      </nav> 
    </div>
  </div>
</div>


    


<footer>

  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <ul
          class="list-inline list-group list-group-horizontal text-center footer-links d-flex justify-content-center flex-row">

          
          
        </ul>
      </div>
    </div>

    <div class="row">
      <div class="col-md-12">
        <p class="credits copyright text-muted">
          

          &nbsp;&bull;&nbsp;&copy;
          
          2023
          

          
          &nbsp;&bull;&nbsp;
          <a href="http://localhost:1313/chris_beeley_blog/">Chris Beeley&#39;s blog</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          Powered by <a href="https://gohugo.io">Hugo</a> & <a href="https://github.com/binokochumolvarghese/lightbi-hugo">Lightbi.</a>&nbsp; Made with ❤ by <a href="https://binovarghese.com">Bino</a>
          
        </p>
      </div>
    </div>
  </div>
</footer><script src="https://code.jquery.com/jquery-3.7.0.slim.min.js" integrity="sha256-tG5mcZUtJsZvyKAxYLVXrmjKBVLd6VpVccqz/r4ypFE=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.min.js" integrity="sha384-Y4oOpwW3duJdCWv5ly8SCFYWqFDsfob/3GkgExXKV4idmbt98QcxXYs9UoXAB7BZ" crossorigin="anonymous"></script><script src="http://localhost:1313/chris_beeley_blog/js/dark-mode.js"></script>
    
  </body>
</html>

