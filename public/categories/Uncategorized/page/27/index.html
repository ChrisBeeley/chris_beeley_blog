<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head><script src="/chris_beeley_blog/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=chris_beeley_blog/livereload" data-no-instant defer></script>
    
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">


<title>Uncategorized - Chris Beeley&#39;s blog</title>
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "Chris Beeley\u0027s blog",
    
    "url": "http:\/\/localhost:1313\/chris_beeley_blog\/"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "http:\/\/localhost:1313\/chris_beeley_blog\/"
  
  
  
  
}
</script>

<meta property="og:url" content="http://localhost:1313/chris_beeley_blog/categories/Uncategorized/">
<meta property="og:type" content="website">
<meta property="og:site_name" content="Chris Beeley&#39;s blog">
   
<link rel="apple-touch-icon" sizes="180x180" href=" http://localhost:1313/chris_beeley_blog/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/chris_beeley_blog/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/chris_beeley_blog/favicon/favicon-16x16.png">


<meta name="generator" content="Hugo 0.124.1"><link rel="alternate" href="http://localhost:1313/chris_beeley_blog/index.xml" type="application/rss+xml" title="Chris Beeley&#39;s blog">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
<link rel="stylesheet" href="http://localhost:1313/chris_beeley_blog/css/main.css">
<link disabled id="dark-mode-theme" rel="stylesheet" href="http://localhost:1313/chris_beeley_blog/css/dark.css"><link rel="stylesheet" href="http://localhost:1313/chris_beeley_blog/css/syntax.css"><link rel="stylesheet" href="http://localhost:1313/chris_beeley_blog/css/codeblock.css">




  </head>
  <body>
    
<div class="container fixed-top">
  <div class="row justify-content-center">
    <div class="col-sm-12 col-md-12 col-lg-10 col-xl-10">

      <nav class="navbar navbar-expand-lg navbar-light fixed-top p-0">
        <div class="container">
          
          <a class="navbar-brand fw-bold" href="http://localhost:1313/chris_beeley_blog/">Chris Beeley&#39;s blog</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
            <ul class="navbar-nav mb-2 mb-lg-0">
              

              
              <li class="nav-item nav-link">
                <a id="dark-mode-toggle" class="bi bi-sun"></a>
              </li>
              
            </ul>
          </div>
        </div>
      </nav>

    </div>
  </div>
</div>
    









<header class="header-section ">

  <div class="intro-header no-img mt-10">
    <div class="container">
      <div class="row justify-content-center">
        

          
          <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12">
            

            <div class="categories-heading">
              

              

              

              
              

              

              
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-md-12">
       
      <div class="row">
        
          <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6  mb-4">
    <div class="card h-100 single-post-card shadow-effect bg-faded-light">
        <a href="http://localhost:1313/chris_beeley_blog/?p=166/">
            <div class="card-body">

                <h3 class="fw-bold post-title">New Year&amp;#8217;s resolutions</h3>
                

                <p class="post-meta">
                    <span class="post-meta">
  
  
  &nbsp;January 1, 2012 

  

  
  
  
</span>


                </p>
                
                <div class="post-entry">

                    
                    <p>It’s that time of year again, so what do I need to keep doing or do differently this year?</p>
<p>1. Keep being organised with <a href="http://www.evernote.com/">Evernote</a> and <a href="http://en.wikipedia.org/wiki/Getting_Things_Done">Getting Things Done</a>. I found recently that I was processing so many bits of paper and information that I just gave up. Only the most important stuff got stored in my brain, the rest was discarded. Having started using Evernote and guided by Getting Things Done I have a massive brain pack to store everything I can’t use at the moment.</p>
<p>2. Produce <a href="http://reproducibleresearch.net/index.php/Main_Page">reproducible</a> reports. I think it’s a very important area of growth in statistical analysis and, moreover, I think it will make my work better (for a start, I’ll spend much longer commenting code and making it readable if it’s being published).</p>
<p>3. Learn something new. I need to learn various bits and pieces relating to interactive graphics this year (Tcl/ TK? Java? HTML5?) but I need to expand my statistical knowledge too. Likely candidates include bootstrapping and Bayesian analysis.</p>
<p>4. Publish, publish, publish. I’m sitting on too many datasets and pieces of work that should be published. Blogging is a good way of sharing small pieces of work and progress but it doesn’t require the care and attention which academic publication entails. I must publish more.</p>

                    
                </div>

                <div class="read-more-section">
                    <h6>Read more</h6>
                </div>
            </div>

            
            
        </a>
    </div>
</div> 
        
          <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6  mb-4">
    <div class="card h-100 single-post-card shadow-effect bg-faded-light">
        <a href="http://localhost:1313/chris_beeley_blog/?p=159/">
            <div class="card-body">

                <h3 class="fw-bold post-title">Complex surveys in R</h3>
                

                <p class="post-meta">
                    <span class="post-meta">
  
  
  &nbsp;December 29, 2011 

  

  
  
  
</span>


                </p>
                
                <div class="post-entry">

                    
                    <p><a href="http://chrisbeeley.net/wp-content/uploads/2011/12/books.jpg"><img src="http://chrisbeeley.net/wp-content/uploads/2011/12/books.jpg" alt="" title="books"></a></p>
<p>I carried out what I thought was going to be a very simple piece of work the other day, slicing up some of the questions from a publicly available dataset in order to compare Nottinghamshire Healthcare NHS Trust with some other sites based on particular features of interest. I will post that work some other time, for now for those who are interested the source code is <a href="https://github.com/ChrisBeeley/Survey-of-mental-health-services">here</a>.</p>
<p>In the meantime, I thought I would share my experience with the book which helped me through this work, which is <a href="http://books.google.co.uk/books?id=L96ludyhFBsC&amp;printsec=frontcover&amp;source=gbs_ge_summary_r&amp;cad=0#v=onepage&amp;q&amp;f=false">here</a>.</p>
<p>Complex surveys: A guide to analysis using R, which accompanies the <a href="http://cran.r-project.org/web/packages/survey/index.html">survey</a> package (or vice versa?), was a real joy for me to use. As the author explains in the book, complex survey designs are everywhere, and I confess I have been rather ignoring them in my work. There is just the right mix of code, equations, explanation, and some truly wonderful graphics in this book to equip you to deal with them.</p>
<p>So don’t be frightened of complex survey designs! Beg, borrow, or buy this book and get analysing!</p>

                    
                </div>

                <div class="read-more-section">
                    <h6>Read more</h6>
                </div>
            </div>

            
            
        </a>
    </div>
</div> 
        
          <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6  mb-4">
    <div class="card h-100 single-post-card shadow-effect bg-faded-light">
        <a href="http://localhost:1313/chris_beeley_blog/?p=147/">
            <div class="card-body">

                <h3 class="fw-bold post-title">Quick presentations</h3>
                

                <p class="post-meta">
                    <span class="post-meta">
  
  
  &nbsp;November 16, 2011 

  

  
  
  
</span>


                </p>
                
                <div class="post-entry">

                    
                    <p>Just a quick one from me today, lots of deadlines colliding, which is handy because that’s what this post is about. I’ve been experimenting with the <a href="http://en.wikipedia.org/wiki/Beamer_(LaTeX)">beamer</a> class for LaTeX, with Sweave, which is another way of saying that I’ve been trying to save time producing slides for presentations directly from code as analysed by R.</p>
<p>The syntax is very simple, open a document with:</p>
<p>documentclass{beamer}<br>
usetheme{Berlin}<br>
title{Title goes here}<br>
author{Chris Beeley}<br>
date{today}<br>
begin{document}</p>
<p>Slides are included with:</p>
<p>begin{frame}<br>
section{Main findings}<br>
… slide content goes here<br>
end{frame}</p>
<p>The main strength, of course, is the ability to include graphics straight from R, and particularly in the analysis I’m doing today, because I’m pulling a lot of variables from an SPSS spreadsheet and making comparisons between the national figures and those for my areas. A lot of the code is the same for each graph.</p>
<pre tabindex="0"><code>&lt;pre class=&#34;brush: r; title: ; notranslate&#34; title=&#34;&#34;&gt;
&lt;&lt;fig=TRUE, echo=FALSE, height=4, width=7&gt;&gt;=

par(mar=c(10, 4, 4, 2) + 0.1)

temp1=apply(maindata[which(names(maindata)==&#34;dhelp1.01&#34;):
which(names(maindata)==&#34;dhelp1.10&#34;)], 2, 
function(m) prop.table(table(m))[2])

temp2=apply(subset(maindata, region==&#34;East Midlands&#34;)[which
(names(maindata)==&#34;dhelp1.01&#34;): which(names(maindata)
==&#34;dhelp1.10&#34;)], 2, function(m) prop.table(table(m))[2])

graphmat=rbind(temp1, temp2)*100

colnames(graphmat)=c(&#34;Personal care&#34;, &#34;Physical help&#34;,
 &#34;Services/ benefits&#34;, &#34;Paperwork/ financial&#34;,
 &#34;Other practical&#34;, &#34;Company&#34;, &#34;Taking out&#34;, 
&#34;Giving medicines&#34;, &#34;Keeping an eye&#34;, &#34;Other&#34;)

barx=barplot(graphmat, beside=TRUE, ylim=c(0,100), col=c(&#34;red&#34;, &#34;green&#34;), las=3)

text(barx[1,], graphmat[1,]+5, paste(round(graphmat[1,]), &#34;%&#34;), cex=.5)
text(barx[2,], graphmat[2,]+5, paste(round(graphmat[2,]), &#34;%&#34;), cex=.5)

legend(&#34;topright&#34;, c(&#34;National&#34;, &#34;East Midlands&#34;), fill=c(&#34;red&#34;, &#34;green&#34;))

@
</code></pre><p>All I need to do is update the names of the variables in the which(names(mydata)==”x”) argument and then put some labels in which will be drawn on the x-axis. I have about 10 of these graphs to make. Just thinking about doing it all by hand makes me feel tired. And if I do decide to change some of the axis labels, or add to or take away from the variables in the graph, it’s just a question of quickly editing the code, and then recompiling to a pdf. Magic.</p>

                    
                </div>

                <div class="read-more-section">
                    <h6>Read more</h6>
                </div>
            </div>

            
            
        </a>
    </div>
</div> 
        
          <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6  mb-4">
    <div class="card h-100 single-post-card shadow-effect bg-faded-light">
        <a href="http://localhost:1313/chris_beeley_blog/?p=133/">
            <div class="card-body">

                <h3 class="fw-bold post-title">Simulating data</h3>
                

                <p class="post-meta">
                    <span class="post-meta">
  
  
  &nbsp;October 3, 2011 

  

  
  
  
</span>


                </p>
                
                <div class="post-entry">

                    
                    <p>I try to publish as much of my work as I can on the internet, where the people who own the data agree (my little bit of the website is <a href="http://www.institutemh.org.uk/-about-us-/our-evaluation-service">here</a>) but very often I can’t publish the data because of issues with ongoing projects, other publications, various levels of confidentiality of data, and so on.</p>
<p>So I’ve decided to try to simulate the data whenever there is an issue with publication. It’s very easy and it’s an excellent way for me to be able to show people my work without any of the issues that come from showing real data. The code is below, it comes in two parts for the first set of variables because we fiddled with the questionnaire a bit after Time 8 in the dataset.</p>
<pre tabindex="0"><code>&lt;pre class=&#34;brush: r; title: ; notranslate&#34; title=&#34;&#34;&gt;

mydatafirst[mydatafirst$Time&gt;8,
  which(names(mydatafirst)==&#34;Service&#34;) : which(names(mydatafirst)==&#34;Therapist&#34;)] = 
    apply(mydatafirst[mydatafirst$Time&gt;8, which(names(mydatafirst)==&#34;Service&#34;) : which(names(mydatafirst)==&#34;Therapist&#34;)],
      2, function (x) sample(x[!is.na(x)], length(mydatafirst$Service[mydatafirst$Time&gt;8]), replace=TRUE))

mydatafirst[mydatafirst$Time&lt;9,
  which(names(mydatafirst)==&#34;Service&#34;):which(names(mydatafirst)==&#34;Therapist&#34;)] = 
    apply(mydatafirst[mydatafirst$Time&lt;9,which(names(mydatafirst)==&#34;Service&#34;) : 
      which(names(mydatafirst)==&#34;Therapist&#34;)],
      2, function (x) sample(x[!is.na(x)], length(mydatafirst$Service[mydatafirst$Time&lt;9]), replace=TRUE))

mydatafirst[c(which(names(mydatafirst)==&#34;Imp1&#34;), which(names(mydatafirst)==&#34;Best1&#34;))] =
  apply(mydatafirst[c(which(names(mydatafirst)==&#34;Imp1&#34;), which(names(mydatafirst)==&#34;Best1&#34;))], 2, function (x)
    sample(x[!is.na(x)], length(mydatafirst$Imp1), replace=TRUE))
</code></pre><p>Thanks to the magic of R, and in particular the Sweave and Brew packages, all I need to do is insert these four lines into the code, re-run the report, and I have a nicely simulated dataset. I must confess I didn’t use R to convert the comments to gibberish, it was easier to download them from <a href="www.random.org">here</a>, but if this website didn’t exist then I certainly could have used R to do this very easily.</p>
<p>Something else that R and Sweave are really helping me with at the moment is making it possible to start to analyse data and compile reports before the data comes in. Because Sweave will automatically put together the statistics and graphs for me as I go along, it frees me up to just work on the data, share the progress with people as it comes along, and then put together the final analysis when all the data is collected, without having to manually re-write all the statistics and copy and paste all the graphs all the way through. I’ll post about the usefulness of Sweave and how it helps with workflow another time.</p>

                    
                </div>

                <div class="read-more-section">
                    <h6>Read more</h6>
                </div>
            </div>

            
            
        </a>
    </div>
</div> 
        
          <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6  mb-4">
    <div class="card h-100 single-post-card shadow-effect bg-faded-light">
        <a href="http://localhost:1313/chris_beeley_blog/?p=108/">
            <div class="card-body">

                <h3 class="fw-bold post-title">Robin Hood marathon results</h3>
                

                <p class="post-meta">
                    <span class="post-meta">
  
  
  &nbsp;September 12, 2011 

  

  
  
  
</span>


                </p>
                
                <div class="post-entry">

                    
                    <p>I ran the Robin Hood marathon yesterday in a decent-ish 4 hours and 13 minutes, which is my best yet. Naturally, I was curious to see how my fellow runners fared, and so I have scraped the times from a pdf and summarised them using R and ggplot2.</p>
<p>I ran to support the <!-- raw HTML omitted --><!-- raw HTML omitted -->Disaster Emergency Committee, because of the East Africa Appeal, so if you would like to support this very worthy cause then please go <a href="http://www.justgiving.com/Chris-Beeley">here</a>.</p>
<p>Data scraping, for those that do not know, is the process of taking human-readable files like pdfs and webpages and turning them into computer-readable files like spreadsheets (more <a href="http://en.wikipedia.org/wiki/Data_scraping">here</a>). The scraping itself was very simple since the <a href="http://www.experianfestivalofrunning.co.uk/RobinHoodResults11/FullMarathon11v1.pdf">pdf</a> copy-pasted very nicely into a spreadsheet, which then read into R as a one variable list like so:</p>
<p>1 10038 Carl Allwood M Sutton &amp; Ashfield Harriers 02:38:40 1 02:38:40<br>
2 10098 Adam Holland M Votwo/USN 02:41:25 2 02:41:25<br>
3 13007 Pumlani Bangani M 02:43:23 3 02:43:23<br>
4 10028 Anthony Jackson M Sittingbourne Striders 02:44:39 4 02:44:39<br>
5 10187 Peter Stockdale M 02:45:26 5 02:45:25</p>
<p>The trick was merely to split up these big long strings and separate them into the correct variables, which, reading across, are:</p>
<p>Gun position (i.e. official position), race number, Name, Gender, Athletics club, Gun time (i.e. official time), Chip position and Chip time.</p>
<p>Chip position and chip time are the “real” time for slowcoaches such as myself, since it can take up to 10 minutes for all 15,000 runners to cross the line after the gun has gone- a chip therefore reads the time as you cross the start and finish line.</p>
<p>Code is at the bottom for those who are interested (and I would like to acknowledge the author of <a href="http://mcfromnz.wordpress.com/2011/09/07/2011-perth-city-to-surf-stats/">this</a> post from whom I stole the “seconds” function to convert the times into a numeric format).</p>
<p>All times for finishers is shown below. My own time is represented by a vertical red line, with the median time being a black and dashed vertical line.</p>
<p><a href="http://chrisbeeley.net/wp-content/uploads/2011/09/rplot.png"><img src="http://chrisbeeley.net/wp-content/uploads/2011/09/rplot.png?w=300" alt="" title="Rplot"></a></p>
<p>Next up is the difference between male and female finishers, with medians for each group given as vertical lines.</p>
<p><a href="http://chrisbeeley.net/wp-content/uploads/2011/09/rplot012.png"><img src="http://chrisbeeley.net/wp-content/uploads/2011/09/rplot012.png?w=300" alt="" title="Rplot01"></a></p>
<p>And lastly, a faceted plot showing the differences between different ages and genders. I recoded some of the age categories because they vary across genders which makes a mess of the faceting.</p>
<p><a href="http://chrisbeeley.net/wp-content/uploads/2011/09/rplot02.png"><img src="http://chrisbeeley.net/wp-content/uploads/2011/09/rplot02.png?w=300" alt="" title="Rplot02"></a></p>
<p>The code:</p>
<pre tabindex="0"><code>&lt;pre class=&#34;brush: r; title: ; notranslate&#34; title=&#34;&#34;&gt;
library(ggplot2)
library(car)

mydata=read.csv(&#34;D:\Dropbox\R-files\Marathon\Marathon_times.csv&#34;, stringsAsFactors=FALSE)

mylist1=strsplit(mydata$Var, &#34;&#34;)

# find position, name and gender for all rows

mydata$Gunpos=lapply(mylist1, function(x) x[1])
mydata$Name=lapply(mylist1, function(x) x[3:4])
mydata$Gender=lapply(mylist1, function(x) x[5])

mydata$Chiptime=lapply(mylist1, function(x) x[length(x)])
mydata$Chippos=lapply(mylist1, function(x) x[length(x)-1])
mydata$Guntime=lapply(mylist1, function(x) x[length(x)-2])

# find the rows where the age category is included, i.e. 6th column is numeric

mydata$Age=NA

myvec=unlist(lapply(mylist1, function(x) as.numeric(x[6])&amp;gt;0))
myvec[is.na(myvec)]=FALSE

mydata$Age[myvec]=unlist(lapply(mylist1, function(x) x[6])[myvec])

mydata$Age[is.na(mydata$Age)]=18

str(mydata$Age)
mydata$Age=factor(mydata$Age)

mydata$Age2=recode(mydata$Age, &#34;&#39;18&#39;=&#39;18+&#39;; c(&#39;35&#39;, &#39;40&#39;)=&#39;35+&#39;; c(&#39;45&#39;, &#39;50&#39;)=&#39;45+&#39;; c(&#39;55&#39;, &#39;60&#39;)=&#39;55+&#39;; c(&#39;65&#39;, &#39;70&#39;, &#39;75&#39;)=&#39;65+&#39;&#34;;)

# fix the people with 3 names whose columns are misaligned

mydata$Gender[mydata$Gender!=&#34;M&#34; &amp; mydata$Gender!=&#34;F&#34;]=lapply(mylist1, function(x) x[6])[mydata$Gender!=&#34;M&#34; &amp; mydata$Gender!=&#34;F&#34;]

# fix the three stragglers with four names

mydata$Gender[c(331, 422, 1043)]=&#34;M&#34;

# make gender a nicely formatted factor

mydata$Gender=factor(unlist(mydata$Gender))

# the title snuck in at row 75, delete this

mydata=data.frame(mydata[-75,])

### format the time values

# function from http://mcfromnz.wordpress.com/2011/09/07/2011-perth-city-to-surf-stats/

seconds &lt;- function(x){
  as.numeric(substr(x,1,2)) * 60 * 60 +
  as.numeric(substr(x,4,5)) * 60 +
  as.numeric(substr(x,7,8)) 
}

mydata$Finaltime=seconds(unlist(mydata$Chiptime))/3600

### summarise

# overall
ggplot(mydata, aes(Finaltime)) + 
   labs(colour = &#34;Gender&#34;) + 
   geom_density(size=1)+
   xlim(2, 7.5)+ 
   geom_vline(xintercept = 4+13/60, col=&#34;red&#34;, lty=1) +
   geom_vline(xintercept = median(mydata$Finaltime), col=&#34;black&#34;, lty=2)
   

# by gender
ggplot(mydata, aes(Finaltime, colour = droplevels(Gender))) + 
   labs(colour = &#34;Gender&#34;) + 
   geom_density(size=1) +
   xlim(2, 7.5)+
   geom_vline(xintercept = median(subset(mydata, Gender==&#34;F&#34;)$Finaltime), col=&#34;red&#34;, lty=1) +
   geom_vline(xintercept = median(subset(mydata, Gender==&#34;M&#34;)$Finaltime), col=&#34;blue&#34;, lty=1)

# by age category and gender
ggplot(mydata, aes(Finaltime, colour = droplevels(Gender))) + 
   labs(colour = &#34;Gender&#34;) + 
   geom_density(size=1) + facet_wrap(~Age2)+
   xlim(2, 7.5)
</code></pre>
                    
                </div>

                <div class="read-more-section">
                    <h6>Read more</h6>
                </div>
            </div>

            
            
        </a>
    </div>
</div> 
        
          <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6  mb-4">
    <div class="card h-100 single-post-card shadow-effect bg-faded-light">
        <a href="http://localhost:1313/chris_beeley_blog/?p=99/">
            <div class="card-body">

                <h3 class="fw-bold post-title">Misleading means and medians</h3>
                

                <p class="post-meta">
                    <span class="post-meta">
  
  
  &nbsp;September 1, 2011 

  

  
  
  
</span>


                </p>
                
                <div class="post-entry">

                    
                    <p>Over at <a href="http://exploringdatablog.blogspot.com/2011/08/some-additional-thoughts-on-useless.html">this</a> excellent blog there is an interesting discussion about times when means and medians can be deceptive, particularly in the case where two variables with equal means have very different distributions. I chimed in myself and mentioned some of the examples which I come across in my work. Here is a particularly egregious example, measurement of self-esteem in patients on psychiatric wards in England and Belgium-</p>
<p>England mean<br>
3.4<br>
Belgium mean<br>
3.2<br>
England median<br>
3.3<br>
Belgium median<br>
3.2<br>
England sd<br>
1.2<br>
Belgium sd<br>
0.9</p>
<p>Looks pretty similar on the face of it. Let’s have a look at the actual distribution (click to enlarge).</p>
<p><a href="http://chrisbeeley.net/wp-content/uploads/2011/09/selfesteem.png"><img src="http://chrisbeeley.net/wp-content/uploads/2011/09/selfesteem.png?w=300" alt="" title="SelfEsteem"></a></p>
<p>Pretty different. Quite interesting to consider why the two are so different. It would appear on the face of it that the measure works better in Belgium, producing a nice normal distribution, and not so well in England, where many individuals are selecting the maximum response across all the items in the scale.</p>
<p>Too often, I think, we talk about non-normal distributions in terms of their median, when as you can see here, many sins can be hidden in this way. I don’t know why the self-esteem measure is behaving like this in England, but we haven’t finished with these data so look out for more on the blog as we have a more thorough look.</p>
<p>R code:</p>
<pre tabindex="0"><code>&lt;pre class=&#34;brush: r; title: ; notranslate&#34; title=&#34;&#34;&gt;
mygraph=function(x){
  
par(mfrow=c(1,2))  

a=subset(mydata, country==1)
b=subset(mydata, country==2)

print(&amp;quot;England mean&amp;quot;)
print(mean(a[,x], na.rm=TRUE))
print(&amp;quot;Belgium mean&amp;quot;)
print(mean(b[,x], na.rm=TRUE))

print(&amp;quot;England median&amp;quot;)
print(median(a[,x], na.rm=TRUE))
print(&amp;quot;Belgium median&amp;quot;)
print(median(b[,x], na.rm=TRUE))

print(&amp;quot;England sd&amp;quot;)
print(sd(a[,x], na.rm=TRUE))
print(&amp;quot;Belgium sd&amp;quot;)
print(sd(b[,x], na.rm=TRUE))

hist(a[,x], main=&amp;quot;England&amp;quot;, xlab=&amp;quot;Self esteem score&amp;quot;, breaks=seq(0,5,by=.2), freq=FALSE)
lines(density(a[,x], na.rm=TRUE))
hist(b[,x], main=&amp;quot;Belgium&amp;quot;, xlab=&amp;quot;Self esteem score&amp;quot;, breaks=seq(0,5,by=.2), freq=FALSE)
lines(density(b[,x], na.rm=TRUE))
}

mygraph(&amp;quot;Selfesteem&amp;quot;)
</code></pre>
                    
                </div>

                <div class="read-more-section">
                    <h6>Read more</h6>
                </div>
            </div>

            
            
        </a>
    </div>
</div> 
        
      </div>
    </div>
  </div>
</div>

<div class="container">
 <div class="row font-sans"> 
   <div class="col-md-12 mt-10">
      <nav aria-label="Page navigation"> 
      <ul class= "pagination justify-content-end">    
      
    <ul class="pagination pagination-default">
      <li class="page-item">
        <a href="/chris_beeley_blog/categories/Uncategorized/" aria-label="First" class="page-link" role="button"><span aria-hidden="true">&laquo;&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/chris_beeley_blog/categories/Uncategorized/page/26/" aria-label="Previous" class="page-link" role="button"><span aria-hidden="true">&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/chris_beeley_blog/categories/Uncategorized/page/25/" aria-label="Page 25" class="page-link" role="button">25</a>
      </li>
      <li class="page-item">
        <a href="/chris_beeley_blog/categories/Uncategorized/page/26/" aria-label="Page 26" class="page-link" role="button">26</a>
      </li>
      <li class="page-item active">
        <a aria-current="page" aria-label="Page 27" class="page-link" role="button">27</a>
      </li>
      <li class="page-item">
        <a href="/chris_beeley_blog/categories/Uncategorized/page/28/" aria-label="Page 28" class="page-link" role="button">28</a>
      </li>
      <li class="page-item">
        <a href="/chris_beeley_blog/categories/Uncategorized/page/29/" aria-label="Page 29" class="page-link" role="button">29</a>
      </li>
      <li class="page-item">
        <a href="/chris_beeley_blog/categories/Uncategorized/page/28/" aria-label="Next" class="page-link" role="button"><span aria-hidden="true">&raquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/chris_beeley_blog/categories/Uncategorized/page/29/" aria-label="Last" class="page-link" role="button"><span aria-hidden="true">&raquo;&raquo;</span></a>
      </li>
    </ul> 
      </ul>
      </nav> 
    </div>
  </div>
</div>


    


<footer>

  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <ul
          class="list-inline list-group list-group-horizontal text-center footer-links d-flex justify-content-center flex-row">

          
          
        </ul>
      </div>
    </div>

    <div class="row">
      <div class="col-md-12">
        <p class="credits copyright text-muted">
          

          &nbsp;&bull;&nbsp;&copy;
          
          2023
          

          
          &nbsp;&bull;&nbsp;
          <a href="http://localhost:1313/chris_beeley_blog/">Chris Beeley&#39;s blog</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          Powered by <a href="https://gohugo.io">Hugo</a> & <a href="https://github.com/binokochumolvarghese/lightbi-hugo">Lightbi.</a>&nbsp; Made with ❤ by <a href="https://binovarghese.com">Bino</a>
          
        </p>
      </div>
    </div>
  </div>
</footer><script src="https://code.jquery.com/jquery-3.7.0.slim.min.js" integrity="sha256-tG5mcZUtJsZvyKAxYLVXrmjKBVLd6VpVccqz/r4ypFE=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.min.js" integrity="sha384-Y4oOpwW3duJdCWv5ly8SCFYWqFDsfob/3GkgExXKV4idmbt98QcxXYs9UoXAB7BZ" crossorigin="anonymous"></script><script src="http://localhost:1313/chris_beeley_blog/js/dark-mode.js"></script>
    
  </body>
</html>

