<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/chris_beeley_blog/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=chris_beeley_blog/livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>useR day four and beginner&amp;#8217;s odfWeave | </title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="I’m a bit late with the report from the last day of the useR conference, I was very busy Thursday getting home and catching up with the housework on Friday.">
    <meta name="generator" content="Hugo 0.127.0">
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    
      <meta name="author" content = "chrisbeeley">
    

    
<link rel="stylesheet" href="/chris_beeley_blog/ananke/css/main.min.css" >



    

    
      

    

    

    
      <link rel="canonical" href="http://localhost:1313/chris_beeley_blog/?p=87/">
    

    <meta property="og:url" content="http://localhost:1313/chris_beeley_blog/?p=87/">
  <meta property="og:title" content="useR day four and beginner&amp;#8217;s odfWeave">
  <meta property="og:description" content="I’m a bit late with the report from the last day of the useR conference, I was very busy Thursday getting home and catching up with the housework on Friday.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2011-08-20T07:05:32+00:00">
    <meta property="article:modified_time" content="2011-08-20T07:05:32+00:00">

  <meta itemprop="name" content="useR day four and beginner&amp;#8217;s odfWeave">
  <meta itemprop="description" content="I’m a bit late with the report from the last day of the useR conference, I was very busy Thursday getting home and catching up with the housework on Friday.">
  <meta itemprop="datePublished" content="2011-08-20T07:05:32+00:00">
  <meta itemprop="dateModified" content="2011-08-20T07:05:32+00:00">
  <meta itemprop="wordCount" content="716">
  <meta itemprop="keywords" content="Uncategorized">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="useR day four and beginner&amp;#8217;s odfWeave">
  <meta name="twitter:description" content="I’m a bit late with the report from the last day of the useR conference, I was very busy Thursday getting home and catching up with the housework on Friday.">

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/chris_beeley_blog/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        
      
    </a>
    <div class="flex-l items-center">
      

      
      
<div class="ananke-socials">
  
</div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Posts
      </aside>
      










  <div id="sharing" class="mt3 ananke-socials">
    
  </div>


      <h1 class="f1 athelas mt3 mb1">useR day four and beginner&amp;#8217;s odfWeave</h1>
      
      <p class="tracked">
        By <strong>chrisbeeley</strong>
      </p>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2011-08-20T07:05:32Z">August 20, 2011</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>I’m a bit late with the report from the last day of the useR conference, I was very busy Thursday getting home and catching up with the housework on Friday. I once again favoured sessions about graphics and best in show must go to <a href="http://4dpiecharts.com/2011/08/17/user2011-easy-interactive-ggplots-talk/">Easy interactive ggplots</a>, particularly for a bit of a coding novice like myself. I’m going to take some of the ideas from this talk and use them at work, it will blow everyone’s mind (well, doing it for free with blow everyone’s mind, anyway) so a big thank you to Richie for sharing his ideas and his code.</p>
<p>Since I got home I’ve been manfully struggling with odfWeave again, so I’m going to give a quick guide for new starters like myself in the hope that someone’s Google search for “odfWeave problems” or the suchlike will point them here. It’s for beginners, so if you’re not a beginner then you may as well skip this bit and go for a walk or something.</p>
<p>1) DON’T use windows. Even if you can get the zip/ unzip bit working, which I did eventually, you’ll hit a problem when you want to use an older version of the XML library (which you have to, see below)- unless you’re going to compile it yourself. If you’re going to compile it yourself, you clearly have a different definition of the word “beginner” than I do, and congratulations you on being so modest.</p>
<p>2) DO downgrade your XML version (or if you haven’t installed it yet, never install 3.4 in the first place). It’s dead easy to do, just go <a href="http://cran.r-project.org/src/contrib/Archive/XML">here</a> and download the 3.2 version, which works beautifully. (use the install.packages() command with a pointer to the file, or if you use the fabulous <a href="http://rstudio.org/">RStudio</a>, which I deeply love, then they have an option to use a downloaded file after their install packages button).</p>
<p>I think you should be pretty okay after that. I still got confused by some of the code snippets, so let’s just have a quick round-up of stuff you might want to do and how to do it.</p>
<p>Inline code is just like Sweave, so it’s</p>
<p>Sexpr{version$version.string}</p>
<p>Blocks of code, also, are just like Sweave. Just in case you get in a muddle, which to be honest I did:</p>
<p>1) Code you want to print (for presentations etc.:</p>
<pre tabindex="0"><code>&lt;pre class=&#34;brush: r; title: ; notranslate&#34; title=&#34;&#34;&gt;
&amp;lt;&amp;lt;echo=TRUE&amp;gt;=
rnorm(100)
@
</code></pre><p>Code chunk finished with @</p>
<p>2) Code you want a graphic out of:</p>
<pre tabindex="0"><code>&lt;pre class=&#34;brush: r; title: ; notranslate&#34; title=&#34;&#34;&gt;
&amp;lt;&amp;lt;fig=TRUE, echo=FALSE&amp;gt;&amp;gt;=
hist(rnorm(100))
@
</code></pre><p>DON’T forget to encapsulate ggplot2 commands like ggplot and qplot in a print() because of some technical reason that essentially means “that’s just how you do it”. Code chunk finished with @</p>
<p>3) Code you want a table out of:</p>
<pre tabindex="0"><code>&lt;pre class=&#34;brush: r; title: ; notranslate&#34; title=&#34;&#34;&gt;
&amp;lt;&amp;lt;Table1,echo=FALSE,results=xml&amp;gt;&amp;gt;=
tempmat=matrix(with(mydata, table(Ethnicity, Control)), ncol=2)
row.names(tempmat)=row.names(with(mydata, table(Ethnicity, Control)))

odfTable(tempmat, useRowNames=TRUE, colnames=c(&amp;quot;&amp;quot;, &amp;quot;Control&amp;quot;, &amp;quot;Treatment&amp;quot;))
@
</code></pre><p>You’ll use the odfTable command, which does NOT work on table() objects, just turn them into a matrix or a dataframe and they work fine. Notice how I’ve put the row and column names in as well, it does mention it in the help file, but that’s how you do it anyway. Code chunk finished with @</p>
<p>I think that should be enough to get you started. I wish I’d read this post about 3 months ago, because I’ve been fiddling with odfWeave on and off since then (I started on Windows, I think that was my main mistake really, couldn’t get the zip and unzip commands to work for ages).</p>
<p>Here’s the first bit of the code from a report I’m writing to give you an idea.</p>
<pre tabindex="0"><code>&lt;pre class=&#34;brush: r; title: ; notranslate&#34; title=&#34;&#34;&gt;
Age
This was compared by comparing the distribution and median of the age of individuals in each group.

&amp;lt;&amp;lt;fig=FALSE, echo=FALSE&amp;gt;&amp;gt;=

rm(list=ls())
library(ggplot2)
library(car)

mydata=read.csv(&amp;quot;/home/chris/Dropbox/R-files/GCAMT/TCComparison.csv&amp;quot;)
mydata$Control=factor(mydata$Control, labels=c(&amp;quot;Control&amp;quot;, &amp;quot;Treatment&amp;quot;))

@

&amp;lt;&amp;lt;fig=TRUE, echo=FALSE&amp;gt;&amp;gt;=

# DOB

mydata$DOB2=as.Date(mydata$DOB, format=&amp;quot;%Y-%m-%d&amp;quot;, origin=&amp;quot;1899-12-30&amp;quot;)

print(

qplot(DOB2, data=mydata, geom=&amp;quot;density&amp;quot;, colour= Control, main=&amp;quot;Median DOB marked blue for treatment, red for control&amp;quot;, xlab=&amp;quot;Date of birth&amp;quot;, ylab=&amp;quot;Density&amp;quot;) + 
	geom_vline(xintercept = median(subset(mydata, Control==&amp;quot;Treatment&amp;quot;)$DOB-25569), col=&amp;quot;blue&amp;quot;, lty=2) + 
	geom_vline(xintercept = median(subset(mydata, Control==&amp;quot;Control&amp;quot;)$DOB-25569), col=&amp;quot;red&amp;quot;, lty=2) 

	)


@
Ethnicity
Ethnicity within treatment and control is shown below.

&amp;lt;&amp;lt;Table1,echo=FALSE,results=xml&amp;gt;&amp;gt;=
# &amp;quot;Ethnicity&amp;quot;

tempmat=matrix(with(mydata, table(Ethnicity, Control)), ncol=2)
row.names(tempmat)=row.names(with(mydata, table(Ethnicity, Control)))

odfTable(tempmat, useRowNames=TRUE, colnames=c(&amp;quot;&amp;quot;, &amp;quot;Control&amp;quot;, &amp;quot;Treatment&amp;quot;))

@
</code></pre><ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://localhost:1313/chris_beeley_blog/" >
    &copy; 
  </a>
    <div>
<div class="ananke-socials">
  
</div>
</div>
  </div>
</footer>

  </body>
</html>
