<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head><script src="/chris_beeley_blog/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=chris_beeley_blog/livereload" data-no-instant defer></script>
  

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" type="image/png" href="http://localhost:1313/chris_beeley_blog/favicon.ico" />
<meta property="og:url" content="http://localhost:1313/chris_beeley_blog/?p=1037/">
  <meta property="og:site_name" content="Chris Beeley&#39;s blog">
  <meta property="og:title" content="Failure to produce pdf with RMarkdown tidyverse">
  <meta property="og:description" content="I’m using tidyverse for everything now, as I’ve mentioned in previous posts, when I want a cup of tea I just run:
&lt; h p o r u f s i e s i e n e l l f c t e u l % e c s a &gt; r t e s % ( ( ( s k t ) = i e &#34; t a b c , r h u e k s n e h t : = t = l r e ; 1 ) ) t % i % &gt; t &gt; % l % e : ; n o t r a n s l a t e &#34; t i t l e = &#34; &#34; &gt; I just ran code(in a gist because the markup makes Hugo go strange) in a vanilla RStudio setup with pdflatex installed">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2017-12-20T15:21:32+00:00">
    <meta property="article:modified_time" content="2017-12-20T15:21:32+00:00">

<title>Chris Beeley&#39;s blog | Failure to produce pdf with RMarkdown tidyverse</title>

    <link rel="stylesheet" href="/chris_beeley_blog/css/main.css">
  
      <link rel="stylesheet" href="/chris_beeley_blog/css/palette/catpuccin.css">

      <script src="/chris_beeley_blog/js/main.js"></script>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

</head>

  
<body
    class="dark"
>
  
  <main>
    
  <div class="container pt-5">
    <div class="row mt-5 pt-5">
      
  <nav aria-label="breadcrumb" class="small">
    <ol class="breadcrumb fw-bold">
    <li class="breadcrumb-item">
      <a href="/chris_beeley_blog/posts"
        class="text-decoration-underline link-offset-3"
        
      >posts</a>
      
    </li>
    <li class="breadcrumb-item">
      <a href="https://github.com/ChrisBeeley/chris_beeley_blog"
        
          target="_blank" rel="noopener noreferrer"
        
      >github</a>
      
    </li>
    </ol>
  </nav>

    </div>
    
    <div class="post">
      <header class="mb-4">
        <h1 class="text-uppercase">Failure to produce pdf with RMarkdown tidyverse</h1>
        
        
        <div aria-label="breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item small">
              <time datetime="2017-12-20T15:21:32&#43;00:00">December 20, 2017</time>
            </li>
            <li class="breadcrumb-item small">
              3 minutes
            </li>
          </ol>
        </div>
      </header>
      <article>
        <p>I’m using tidyverse for everything now, as I’ve mentioned in previous posts, when I want a cup of tea I just run:</p>



<div class="goat svg-container ">
  
    <svg
      xmlns="http://www.w3.org/2000/svg"
      font-family="Menlo,Lucida Console,monospace"
      
        viewBox="0 0 432 105"
      >
      <g transform='translate(8,16)'>
<text text-anchor='middle' x='0' y='4' fill='currentColor' style='font-size:1em'>&lt;</text>
<text text-anchor='middle' x='0' y='36' fill='currentColor' style='font-size:1em'>h</text>
<text text-anchor='middle' x='8' y='4' fill='currentColor' style='font-size:1em'>p</text>
<text text-anchor='middle' x='8' y='36' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='16' y='4' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='16' y='36' fill='currentColor' style='font-size:1em'>u</text>
<text text-anchor='middle' x='16' y='52' fill='currentColor' style='font-size:1em'>f</text>
<text text-anchor='middle' x='16' y='68' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='16' y='84' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='24' y='4' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='24' y='36' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='24' y='52' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='24' y='68' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='24' y='84' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='32' y='36' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='32' y='52' fill='currentColor' style='font-size:1em'>l</text>
<text text-anchor='middle' x='32' y='68' fill='currentColor' style='font-size:1em'>l</text>
<text text-anchor='middle' x='32' y='84' fill='currentColor' style='font-size:1em'>f</text>
<text text-anchor='middle' x='40' y='4' fill='currentColor' style='font-size:1em'>c</text>
<text text-anchor='middle' x='40' y='52' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='40' y='68' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='40' y='84' fill='currentColor' style='font-size:1em'>u</text>
<text text-anchor='middle' x='48' y='4' fill='currentColor' style='font-size:1em'>l</text>
<text text-anchor='middle' x='48' y='36' fill='currentColor' style='font-size:1em'>%</text>
<text text-anchor='middle' x='48' y='52' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='48' y='68' fill='currentColor' style='font-size:1em'>c</text>
<text text-anchor='middle' x='48' y='84' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='56' y='4' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='56' y='36' fill='currentColor' style='font-size:1em'>&gt;</text>
<text text-anchor='middle' x='56' y='52' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='56' y='68' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='56' y='84' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='64' y='4' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='64' y='36' fill='currentColor' style='font-size:1em'>%</text>
<text text-anchor='middle' x='64' y='52' fill='currentColor' style='font-size:1em'>(</text>
<text text-anchor='middle' x='64' y='68' fill='currentColor' style='font-size:1em'>(</text>
<text text-anchor='middle' x='64' y='84' fill='currentColor' style='font-size:1em'>(</text>
<text text-anchor='middle' x='72' y='4' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='72' y='52' fill='currentColor' style='font-size:1em'>k</text>
<text text-anchor='middle' x='72' y='68' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='72' y='84' fill='currentColor' style='font-size:1em'>)</text>
<text text-anchor='middle' x='80' y='4' fill='currentColor' style='font-size:1em'>=</text>
<text text-anchor='middle' x='80' y='52' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='80' y='68' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='88' y='4' fill='currentColor' style='font-size:1em'>"</text>
<text text-anchor='middle' x='88' y='52' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='88' y='68' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='96' y='4' fill='currentColor' style='font-size:1em'>b</text>
<text text-anchor='middle' x='96' y='52' fill='currentColor' style='font-size:1em'>c</text>
<text text-anchor='middle' x='96' y='68' fill='currentColor' style='font-size:1em'>,</text>
<text text-anchor='middle' x='104' y='4' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='104' y='52' fill='currentColor' style='font-size:1em'>h</text>
<text text-anchor='middle' x='112' y='4' fill='currentColor' style='font-size:1em'>u</text>
<text text-anchor='middle' x='112' y='52' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='112' y='68' fill='currentColor' style='font-size:1em'>k</text>
<text text-anchor='middle' x='120' y='4' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='120' y='52' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='120' y='68' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='128' y='4' fill='currentColor' style='font-size:1em'>h</text>
<text text-anchor='middle' x='128' y='68' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='136' y='4' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='136' y='52' fill='currentColor' style='font-size:1em'>=</text>
<text text-anchor='middle' x='136' y='68' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='144' y='52' fill='currentColor' style='font-size:1em'>=</text>
<text text-anchor='middle' x='144' y='68' fill='currentColor' style='font-size:1em'>l</text>
<text text-anchor='middle' x='152' y='4' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='152' y='68' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='160' y='4' fill='currentColor' style='font-size:1em'>;</text>
<text text-anchor='middle' x='160' y='52' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='160' y='68' fill='currentColor' style='font-size:1em'>)</text>
<text text-anchor='middle' x='168' y='52' fill='currentColor' style='font-size:1em'>)</text>
<text text-anchor='middle' x='176' y='4' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='176' y='68' fill='currentColor' style='font-size:1em'>%</text>
<text text-anchor='middle' x='184' y='4' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='184' y='52' fill='currentColor' style='font-size:1em'>%</text>
<text text-anchor='middle' x='184' y='68' fill='currentColor' style='font-size:1em'>&gt;</text>
<text text-anchor='middle' x='192' y='4' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='192' y='52' fill='currentColor' style='font-size:1em'>&gt;</text>
<text text-anchor='middle' x='192' y='68' fill='currentColor' style='font-size:1em'>%</text>
<text text-anchor='middle' x='200' y='4' fill='currentColor' style='font-size:1em'>l</text>
<text text-anchor='middle' x='200' y='52' fill='currentColor' style='font-size:1em'>%</text>
<text text-anchor='middle' x='208' y='4' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='216' y='4' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='232' y='4' fill='currentColor' style='font-size:1em'>;</text>
<text text-anchor='middle' x='248' y='4' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='256' y='4' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='264' y='4' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='272' y='4' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='280' y='4' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='288' y='4' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='296' y='4' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='304' y='4' fill='currentColor' style='font-size:1em'>l</text>
<text text-anchor='middle' x='312' y='4' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='320' y='4' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='328' y='4' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='336' y='4' fill='currentColor' style='font-size:1em'>"</text>
<text text-anchor='middle' x='352' y='4' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='360' y='4' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='368' y='4' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='376' y='4' fill='currentColor' style='font-size:1em'>l</text>
<text text-anchor='middle' x='384' y='4' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='392' y='4' fill='currentColor' style='font-size:1em'>=</text>
<text text-anchor='middle' x='400' y='4' fill='currentColor' style='font-size:1em'>"</text>
<text text-anchor='middle' x='408' y='4' fill='currentColor' style='font-size:1em'>"</text>
<text text-anchor='middle' x='416' y='4' fill='currentColor' style='font-size:1em'>&gt;</text>
</g>

    </svg>
  
</div>
<p>I just ran <a href="https://gist.github.com/ChrisBeeley/867ffe93f541797e48f3ad195a75efb9">code</a>(in a gist because the markup makes Hugo go strange) in a vanilla RStudio setup with pdflatex installed</p>
<p>This is the code that you get if you set up an RMarkdown project in RStudio and select “compile to LaTeX”, and you want to do some data stuff with the tidyverse package.</p>
<p>And it produced the following error message:</p>
<p>! Package inputenc Error: Unicode char √ (U+221A)<br>
(inputenc) not set up for use with LaTeX.</p>
<p>See the inputenc package documentation for explanation.<br>
Type H <!-- raw HTML omitted --> for immediate help.<br>
… <!-- raw HTML omitted --></p>
<p>l.145 \end{verbatim}</p>
<p>Try running pandoc with –latex-engine=xelatex.<br>
pandoc: Error producing PDF<br>
Error: pandoc document conversion failed with error 43<br>
Execution halted</p>
<p>I was a bit confused by this for quite a while, the answer of course turns out to be the lovely messages which the tidyverse produces on loading:</p>
<p><img src="https://lh3.googleusercontent.com/-Cn0ZuIwP3zs/Wjp1shrKdeI/AAAAAAAAL7Y/rcFYBh2GvA8sw8jgcUcwheZ0aertVHX4gCHMYCw/d/Screenshot_.jpg" alt=""></p>
<p>With the default message = TRUE behaviour in the code chunk pandoc ends up trying to render those little ticks in LaTeX. Evidently it doesn’t support unicode.</p>
<p>So the document fails, and it’s hard to understand why until you knit to HTML and see the little ticks.</p>
<p>Changing the knitr::opts_chunk$set(echo = TRUE) line to knitr::opts_chunk$set(echo = TRUE, message = FALSE) fixes the problem.</p>
<p>I can’t help but think that this is a rare example of R getting harder to use. When I started with R 10 years ago it was much more difficult to do even simple things like load a csv file or work with dates. These days there are lots of lovely packages to help, and of course RStudio itself makes using R much more intuitive. But this is going to confuse newbies, I think, which is a bit of a shame.</p>
<p>There are several obvious fixes, I won’t bother to list them all, maybe make message = FALSE the default in RMarkdown documents in RStudio seems like the best one, but maybe there’s some reason they don’t want to do that.</p>

      </article>
      

      <div class="row">
    <div class="col-md">
        
        <a href="http://localhost:1313/chris_beeley_blog/?p=1030/">
            <span>previous: </span>
            <span>Font size of code in .Rpres presentations</span>
        </a>
        
    </div>
    <div class="col-md text-md-end">
        
        <a href="http://localhost:1313/chris_beeley_blog/?p=1032/">
            <span>next: </span>
            <span>Analysis tools for Manager Joe</span>
        </a>
        
    </div>
</div>
    </div>
  </div>
  <footer>
    <div class="container mt-4 pb-1">
    <p class="small opacity-75">
        
        
        // powered by <a href="https://gohugo.io/">hugo</a> and <a href="https://github.com/imgios/not-much">imgios/not-much</a>
        
    </p>
</div>

  </footer>

  </main>

  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>
